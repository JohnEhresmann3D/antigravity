
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Godot Performance Analysis Report</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        :root {
            --bg-color: #1e1e1e;
            --text-color: #e0e0e0;
            --card-bg: #2d2d2d;
            --accent: #47a6ff;
            --danger: #ff5252;
            --warning: #ffb142;
            --success: #2cc990;
        }
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: var(--bg-color);
            color: var(--text-color);
            margin: 0;
            padding: 20px;
        }
        .container { max-width: 1200px; margin: 0 auto; }
        h1, h2, h3 { color: var(--accent); }
        .dashboard { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px; margin-bottom: 30px; }
        .card { background-color: var(--card-bg); padding: 20px; border-radius: 8px; box-shadow: 0 4px 6px rgba(0,0,0,0.3); }
        .score-card { text-align: center; }
        .score { font-size: 3em; font-weight: bold; }
        .score.good { color: var(--success); }
        .score.medium { color: var(--warning); }
        .score.bad { color: var(--danger); }
        
        .file-list { display: flex; flex-direction: column; gap: 10px; }
        .file-item { background-color: var(--card-bg); border-radius: 8px; overflow: hidden; }
        .file-header { 
            padding: 15px; 
            display: flex; 
            justify-content: space-between; 
            align-items: center; 
            cursor: pointer; 
            background-color: #333;
        }
        .file-header:hover { background-color: #3d3d3d; }
        .file-name { font-weight: bold; font-family: monospace; }
        .file-score { padding: 5px 10px; border-radius: 4px; font-weight: bold; background: #444; }
        
        .file-details { padding: 15px; display: none; border-top: 1px solid #444; }
        .file-details.open { display: block; }
        
        .issue { margin-bottom: 10px; padding: 8px; border-left: 3px solid; background: rgba(0,0,0,0.2); }
        .issue.high { border-color: var(--danger); }
        .issue.medium { border-color: var(--warning); }
        .issue.low { border-color: var(--accent); }
        .issue-line { font-family: monospace; color: #aaa; margin-right: 10px; }
        .issue-type { font-weight: bold; margin-right: 10px; }
        .code-snippet { 
            font-family: monospace; 
            background: #111; 
            padding: 10px; 
            margin-top: 5px; 
            color: #ccc; 
            overflow-x: auto;
            white-space: pre;
        }
        .highlight { color: #fff; font-weight: bold; background: rgba(255, 82, 82, 0.2); }
        
        /* Filter controls */
        .filter-controls {
            margin: 20px 0;
            padding: 15px;
            background: var(--card-bg);
            border-radius: 8px;
            display: flex;
            gap: 10px;
            align-items: center;
        }
        .filter-btn {
            padding: 8px 16px;
            border: 2px solid transparent;
            border-radius: 4px;
            background: #444;
            color: #fff;
            cursor: pointer;
            transition: all 0.2s;
        }
        .filter-btn:hover { background: #555; }
        .filter-btn.active { border-color: var(--accent); background: #555; }
        .filter-btn.high { border-color: var(--danger); }
        .filter-btn.medium { border-color: var(--warning); }
        .filter-btn.low { border-color: var(--accent); }
        .file-item.hidden { display: none; }
    </style>
</head>
<body>
    <div class="container">
        <h1>Godot Performance Analysis</h1>
        <p>Generated on: <span id="gen-date"></span></p>

        <div class="dashboard">
            <div class="card score-card">
                <h3>Overall Health</h3>
                <div id="overall-score" class="score">-</div>
                <p>Based on static analysis rules</p>
            </div>
            <div class="card">
                <h3>Issue Distribution</h3>
                <canvas id="issueChart"></canvas>
            </div>
            <div class="card">
                <h3>Stats</h3>
                <p>Files Scanned: <span id="total-files">0</span></p>
                <p>Total Lines: <span id="total-lines">0</span></p>
                <p>Total Issues: <span id="total-issues">0</span></p>
            </div>
        </div>

        <div class="filter-controls">
            <span style="font-weight: bold;">Filter by Severity:</span>
            <button class="filter-btn" onclick="filterBySeverity('all')" id="filter-all">All Issues</button>
            <button class="filter-btn high" onclick="filterBySeverity('high')" id="filter-high">High Priority</button>
            <button class="filter-btn medium" onclick="filterBySeverity('medium')" id="filter-medium">Medium Priority</button>
            <button class="filter-btn low" onclick="filterBySeverity('low')" id="filter-low">Low Priority</button>
            <span id="filter-status" style="margin-left: auto; color: #aaa;"></span>
        </div>
        
        <div class="filter-controls">
            <span style="font-weight: bold;">Filter by Type:</span>
            <label style="cursor: pointer; padding: 5px 10px; background: #444; border-radius: 4px;">
                <input type="checkbox" id="type-performance" checked onchange="filterByType()"> Performance
            </label>
            <label style="cursor: pointer; padding: 5px 10px; background: #444; border-radius: 4px;">
                <input type="checkbox" id="type-typing" checked onchange="filterByType()"> Typing
            </label>
            <label style="cursor: pointer; padding: 5px 10px; background: #444; border-radius: 4px;">
                <input type="checkbox" id="type-cleanup" checked onchange="filterByType()"> Cleanup
            </label>
            <label style="cursor: pointer; padding: 5px 10px; background: #444; border-radius: 4px;">
                <input type="checkbox" id="type-complexity" checked onchange="filterByType()"> Complexity
            </label>
            <button class="filter-btn" onclick="toggleAllTypes(false)" style="margin-left: 10px;">Hide All</button>
            <button class="filter-btn" onclick="toggleAllTypes(true)">Show All</button>
            <span id="type-status" style="margin-left: auto; color: #aaa;"></span>
        </div>
        
        <h2>Detailed File Analysis</h2>
        <div id="file-list" class="file-list"></div>
    </div>

    <script>
        const data = {"generated_at": "2026-01-08 10:30:10", "overall_score": 83, "total_files": 28, "total_lines": 3576, "total_issues": 247, "issues_breakdown": {"high": 0, "medium": 235, "low": 12}, "files": [{"path": "tests\\unit\\test_collectible_component.gd", "score": 98.0, "issues": [{"line": 42, "type": "Typing", "severity": "medium", "message": "Missing static type hint on variable. Adding types improves performance.", "snippet": "  \tvar signal_emitted := false\n> \tvar emitted_collector = null\n  \t\n"}], "lines": 241}, {"path": "tests\\unit\\test_damage_component.gd", "score": 34.0, "issues": [{"line": 10, "type": "Typing", "severity": "medium", "message": "Missing return type hint on function. Use '-> Type:' for better performance.", "snippet": "  \n> func before_each():\n  \tdamage_component = DamageComponent.new()\n"}, {"line": 26, "type": "Typing", "severity": "medium", "message": "Missing return type hint on function. Use '-> Type:' for better performance.", "snippet": "  \n> func after_each():\n  \tif mock_target:\n"}, {"line": 45, "type": "Typing", "severity": "medium", "message": "Missing return type hint on function. Use '-> Type:' for better performance.", "snippet": "  \n> func test_deal_damage_reduces_target_health():\n  \tvar initial_health = mock_health.current_health\n"}, {"line": 46, "type": "Typing", "severity": "medium", "message": "Missing static type hint on variable. Adding types improves performance.", "snippet": "  func test_deal_damage_reduces_target_health():\n> \tvar initial_health = mock_health.current_health\n  \tdamage_component._deal_damage_to_node(mock_target)\n"}, {"line": 50, "type": "Typing", "severity": "medium", "message": "Missing return type hint on function. Use '-> Type:' for better performance.", "snippet": "  \n> func test_deal_damage_emits_hit_target_signal():\n  \twatch_signals(damage_component)\n"}, {"line": 55, "type": "Typing", "severity": "medium", "message": "Missing return type hint on function. Use '-> Type:' for better performance.", "snippet": "  \n> func test_deal_damage_only_affects_correct_groups():\n  \t# Note: _deal_damage_to_node is called AFTER group checking in collision handlers\n"}, {"line": 60, "type": "Typing", "severity": "medium", "message": "Missing return type hint on function. Use '-> Type:' for better performance.", "snippet": "  \n> func test_deal_damage_to_multiple_groups():\n  \tmock_target.add_to_group(\"enemy\") # Now in both player and enemy groups\n"}, {"line": 62, "type": "Typing", "severity": "medium", "message": "Missing static type hint on variable. Adding types improves performance.", "snippet": "  \tmock_target.add_to_group(\"enemy\") # Now in both player and enemy groups\n> \tvar initial_health = mock_health.current_health\n  \tdamage_component._deal_damage_to_node(mock_target)\n"}, {"line": 70, "type": "Typing", "severity": "medium", "message": "Missing return type hint on function. Use '-> Type:' for better performance.", "snippet": "  \n> func test_knockback_is_applied_when_enabled():\n  \t# Note: Actual knockback application depends on CharacterBody2D implementation\n"}, {"line": 75, "type": "Typing", "severity": "medium", "message": "Missing return type hint on function. Use '-> Type:' for better performance.", "snippet": "  \n> func test_knockback_force_is_configurable():\n  \tdamage_component.knockback_force = 500.0\n"}, {"line": 83, "type": "Typing", "severity": "medium", "message": "Missing return type hint on function. Use '-> Type:' for better performance.", "snippet": "  \n> func test_one_shot_mode_only_damages_once():\n  \tdamage_component.one_shot = true\n"}, {"line": 86, "type": "Typing", "severity": "medium", "message": "Missing static type hint on variable. Adding types improves performance.", "snippet": "  \tdamage_component._deal_damage_to_node(mock_target)\n> \tvar health_after_first = mock_health.current_health\n  \t# Note: _deal_damage_to_node doesn't check one_shot flag internally\n"}, {"line": 94, "type": "Typing", "severity": "medium", "message": "Missing return type hint on function. Use '-> Type:' for better performance.", "snippet": "  \n> func test_reset_allows_one_shot_to_damage_again():\n  \tdamage_component.one_shot = true\n"}, {"line": 98, "type": "Typing", "severity": "medium", "message": "Missing static type hint on variable. Adding types improves performance.", "snippet": "  \tdamage_component.reset()\n> \tvar health_before_reset = mock_health.current_health\n  \tdamage_component._deal_damage_to_node(mock_target)\n"}, {"line": 106, "type": "Typing", "severity": "medium", "message": "Missing return type hint on function. Use '-> Type:' for better performance.", "snippet": "  \n> func test_destroy_on_hit_flag_exists():\n  \tdamage_component.destroy_on_hit = true\n"}, {"line": 114, "type": "Typing", "severity": "medium", "message": "Missing return type hint on function. Use '-> Type:' for better performance.", "snippet": "  \n> func test_zero_damage_still_triggers_signal():\n  \tdamage_component.damage = 0\n"}, {"line": 120, "type": "Typing", "severity": "medium", "message": "Missing return type hint on function. Use '-> Type:' for better performance.", "snippet": "  \n> func test_negative_damage_does_not_heal():\n  \tdamage_component.damage = -10\n"}, {"line": 122, "type": "Typing", "severity": "medium", "message": "Missing static type hint on variable. Adding types improves performance.", "snippet": "  \tdamage_component.damage = -10\n> \tvar initial_health = mock_health.current_health\n  \tdamage_component._deal_damage_to_node(mock_target)\n"}, {"line": 126, "type": "Typing", "severity": "medium", "message": "Missing return type hint on function. Use '-> Type:' for better performance.", "snippet": "  \n> func test_damage_to_node_without_health_component():\n  \tvar target_no_health = Node2D.new()\n"}, {"line": 127, "type": "Typing", "severity": "medium", "message": "Missing static type hint on variable. Adding types improves performance.", "snippet": "  func test_damage_to_node_without_health_component():\n> \tvar target_no_health = Node2D.new()\n  \ttarget_no_health.add_to_group(\"player\")\n"}, {"line": 135, "type": "Typing", "severity": "medium", "message": "Missing return type hint on function. Use '-> Type:' for better performance.", "snippet": "  \n> func test_empty_damage_groups_damages_nothing():\n  \t# Note: _deal_damage_to_node doesn't check groups, collision handlers do\n"}, {"line": 145, "type": "Typing", "severity": "medium", "message": "Missing return type hint on function. Use '-> Type:' for better performance.", "snippet": "  \n> func test_damage_causes_health_below_critical_threshold():\n  \t# Test damage that brings health below a critical threshold (e.g., 25%)\n"}, {"line": 153, "type": "Typing", "severity": "medium", "message": "Missing return type hint on function. Use '-> Type:' for better performance.", "snippet": "  \n> func test_damage_causes_exact_death():\n  \t# Test damage that causes exactly zero health\n"}, {"line": 162, "type": "Typing", "severity": "medium", "message": "Missing return type hint on function. Use '-> Type:' for better performance.", "snippet": "  \n> func test_overkill_damage():\n  \t# Test damage that exceeds current health\n"}, {"line": 173, "type": "Typing", "severity": "medium", "message": "Missing return type hint on function. Use '-> Type:' for better performance.", "snippet": "  \n> func test_damage_to_node_without_health_emits_blocked_signal():\n  \tvar target_no_health = Node2D.new()\n"}, {"line": 174, "type": "Typing", "severity": "medium", "message": "Missing static type hint on variable. Adding types improves performance.", "snippet": "  func test_damage_to_node_without_health_emits_blocked_signal():\n> \tvar target_no_health = Node2D.new()\n  \ttarget_no_health.add_to_group(\"player\")\n"}, {"line": 182, "type": "Typing", "severity": "medium", "message": "Missing return type hint on function. Use '-> Type:' for better performance.", "snippet": "  \n> func test_damage_to_null_target():\n  \t# Test that damaging null doesn't crash\n"}, {"line": 192, "type": "Typing", "severity": "medium", "message": "Missing return type hint on function. Use '-> Type:' for better performance.", "snippet": "  \n> func test_target_in_multiple_allowed_groups():\n  \t# Target is in both player and enemy groups\n"}, {"line": 196, "type": "Typing", "severity": "medium", "message": "Missing static type hint on variable. Adding types improves performance.", "snippet": "  \tdamage_component.damage_groups = [\"player\", \"enemy\"]\n> \tvar initial_health = mock_health.current_health\n  \tdamage_component._deal_damage_to_node(mock_target)\n"}, {"line": 200, "type": "Typing", "severity": "medium", "message": "Missing return type hint on function. Use '-> Type:' for better performance.", "snippet": "  \n> func test_target_in_no_allowed_groups():\n  \t# Target is in a group not in damage_groups\n"}, {"line": 202, "type": "Typing", "severity": "medium", "message": "Missing static type hint on variable. Adding types improves performance.", "snippet": "  \t# Target is in a group not in damage_groups\n> \tvar neutral_target = Node2D.new()\n  \tneutral_target.add_to_group(\"neutral\")\n"}, {"line": 204, "type": "Typing", "severity": "medium", "message": "Missing static type hint on variable. Adding types improves performance.", "snippet": "  \tneutral_target.add_to_group(\"neutral\")\n> \tvar neutral_health = HealthComponent.new()\n  \tneutral_health.max_health = 100\n"}, {"line": 218, "type": "Typing", "severity": "medium", "message": "Missing return type hint on function. Use '-> Type:' for better performance.", "snippet": "  \n> func test_damage_groups_can_be_modified_at_runtime():\n  \tdamage_component.damage_groups = [\"player\"]\n"}], "lines": 223}, {"path": "tests\\unit\\test_gravity_manager.gd", "score": 22.0, "issues": [{"line": 8, "type": "Typing", "severity": "medium", "message": "Missing return type hint on function. Use '-> Type:' for better performance.", "snippet": "  \n> func before_all():\n  \t# GravityManager is a singleton, so we access it directly\n"}, {"line": 16, "type": "Typing", "severity": "medium", "message": "Missing return type hint on function. Use '-> Type:' for better performance.", "snippet": "  \n> func test_gravity_manager_exists():\n  \tassert_not_null(gravity_manager, \"GravityManager singleton should exist\")\n"}, {"line": 19, "type": "Typing", "severity": "medium", "message": "Missing return type hint on function. Use '-> Type:' for better performance.", "snippet": "  \n> func test_default_gravity_is_downward():\n  \tvar gravity_vector = gravity_manager.get_gravity_vector()\n"}, {"line": 20, "type": "Typing", "severity": "medium", "message": "Missing static type hint on variable. Adding types improves performance.", "snippet": "  func test_default_gravity_is_downward():\n> \tvar gravity_vector = gravity_manager.get_gravity_vector()\n  \tassert_eq(gravity_vector.normalized(), Vector2.DOWN, \"Default gravity should be downward\")\n"}, {"line": 23, "type": "Typing", "severity": "medium", "message": "Missing return type hint on function. Use '-> Type:' for better performance.", "snippet": "  \n> func test_default_gravity_strength_is_one():\n  \tvar strength = gravity_manager.get_gravity_strength()\n"}, {"line": 24, "type": "Typing", "severity": "medium", "message": "Missing static type hint on variable. Adding types improves performance.", "snippet": "  func test_default_gravity_strength_is_one():\n> \tvar strength = gravity_manager.get_gravity_strength()\n  \tassert_eq(strength, 1.0, \"Default gravity strength should be 1.0\")\n"}, {"line": 31, "type": "Typing", "severity": "medium", "message": "Missing return type hint on function. Use '-> Type:' for better performance.", "snippet": "  \n> func test_set_gravity_direction_changes_direction():\n  \tgravity_manager.set_gravity_direction(Vector2.UP)\n"}, {"line": 33, "type": "Typing", "severity": "medium", "message": "Missing static type hint on variable. Adding types improves performance.", "snippet": "  \tgravity_manager.set_gravity_direction(Vector2.UP)\n> \tvar gravity_vector = gravity_manager.get_gravity_vector()\n  \tassert_eq(gravity_vector.normalized(), Vector2.UP, \"Gravity direction should change to UP\")\n"}, {"line": 38, "type": "Typing", "severity": "medium", "message": "Missing return type hint on function. Use '-> Type:' for better performance.", "snippet": "  \n> func test_set_cardinal_direction_up():\n  \tgravity_manager.set_cardinal_direction(\"up\")\n"}, {"line": 40, "type": "Typing", "severity": "medium", "message": "Missing static type hint on variable. Adding types improves performance.", "snippet": "  \tgravity_manager.set_cardinal_direction(\"up\")\n> \tvar gravity_vector = gravity_manager.get_gravity_vector()\n  \tassert_eq(gravity_vector.normalized(), Vector2.UP, \"Cardinal 'up' should set gravity upward\")\n"}, {"line": 44, "type": "Typing", "severity": "medium", "message": "Missing return type hint on function. Use '-> Type:' for better performance.", "snippet": "  \n> func test_set_cardinal_direction_down():\n  \tgravity_manager.set_cardinal_direction(\"down\")\n"}, {"line": 46, "type": "Typing", "severity": "medium", "message": "Missing static type hint on variable. Adding types improves performance.", "snippet": "  \tgravity_manager.set_cardinal_direction(\"down\")\n> \tvar gravity_vector = gravity_manager.get_gravity_vector()\n  \tassert_eq(gravity_vector.normalized(), Vector2.DOWN, \"Cardinal 'down' should set gravity downward\")\n"}, {"line": 49, "type": "Typing", "severity": "medium", "message": "Missing return type hint on function. Use '-> Type:' for better performance.", "snippet": "  \n> func test_set_cardinal_direction_left():\n  \tgravity_manager.set_cardinal_direction(\"left\")\n"}, {"line": 51, "type": "Typing", "severity": "medium", "message": "Missing static type hint on variable. Adding types improves performance.", "snippet": "  \tgravity_manager.set_cardinal_direction(\"left\")\n> \tvar gravity_vector = gravity_manager.get_gravity_vector()\n  \tassert_eq(gravity_vector.normalized(), Vector2.LEFT, \"Cardinal 'left' should set gravity leftward\")\n"}, {"line": 55, "type": "Typing", "severity": "medium", "message": "Missing return type hint on function. Use '-> Type:' for better performance.", "snippet": "  \n> func test_set_cardinal_direction_right():\n  \tgravity_manager.set_cardinal_direction(\"right\")\n"}, {"line": 57, "type": "Typing", "severity": "medium", "message": "Missing static type hint on variable. Adding types improves performance.", "snippet": "  \tgravity_manager.set_cardinal_direction(\"right\")\n> \tvar gravity_vector = gravity_manager.get_gravity_vector()\n  \tassert_eq(gravity_vector.normalized(), Vector2.RIGHT, \"Cardinal 'right' should set gravity rightward\")\n"}, {"line": 65, "type": "Typing", "severity": "medium", "message": "Missing return type hint on function. Use '-> Type:' for better performance.", "snippet": "  \n> func test_flip_gravity_reverses_direction():\n  \tgravity_manager.set_gravity_direction(Vector2.DOWN)\n"}, {"line": 68, "type": "Typing", "severity": "medium", "message": "Missing static type hint on variable. Adding types improves performance.", "snippet": "  \tgravity_manager.flip_gravity()\n> \tvar gravity_vector = gravity_manager.get_gravity_vector()\n  \tassert_eq(gravity_vector.normalized(), Vector2.UP, \"Flip should reverse gravity to UP\")\n"}, {"line": 72, "type": "Typing", "severity": "medium", "message": "Missing return type hint on function. Use '-> Type:' for better performance.", "snippet": "  \n> func test_flip_gravity_twice_returns_to_original():\n  \tvar original = gravity_manager.get_gravity_vector()\n"}, {"line": 73, "type": "Typing", "severity": "medium", "message": "Missing static type hint on variable. Adding types improves performance.", "snippet": "  func test_flip_gravity_twice_returns_to_original():\n> \tvar original = gravity_manager.get_gravity_vector()\n  \tgravity_manager.flip_gravity()\n"}, {"line": 76, "type": "Typing", "severity": "medium", "message": "Missing static type hint on variable. Adding types improves performance.", "snippet": "  \tgravity_manager.flip_gravity()\n> \tvar current = gravity_manager.get_gravity_vector()\n  \tassert_eq(current.normalized(), original.normalized(), \"Double flip should return to original direction\")\n"}, {"line": 83, "type": "Typing", "severity": "medium", "message": "Missing return type hint on function. Use '-> Type:' for better performance.", "snippet": "  \n> func test_set_gravity_strength_changes_strength():\n  \tgravity_manager.set_gravity_strength(2.0)\n"}, {"line": 85, "type": "Typing", "severity": "medium", "message": "Missing static type hint on variable. Adding types improves performance.", "snippet": "  \tgravity_manager.set_gravity_strength(2.0)\n> \tvar strength = gravity_manager.get_gravity_strength()\n  \tassert_eq(strength, 2.0, \"Gravity strength should be 2.0\")\n"}, {"line": 89, "type": "Typing", "severity": "medium", "message": "Missing return type hint on function. Use '-> Type:' for better performance.", "snippet": "  \n> func test_set_gravity_strength_affects_vector_magnitude():\n  \tgravity_manager.set_gravity_direction(Vector2.DOWN)\n"}, {"line": 92, "type": "Typing", "severity": "medium", "message": "Missing static type hint on variable. Adding types improves performance.", "snippet": "  \tgravity_manager.set_gravity_strength(2.0)\n> \tvar gravity_vector = gravity_manager.get_gravity_vector()\n  \tassert_gt(gravity_vector.length(), 980.0, \"Gravity vector magnitude should increase with strength\")\n"}, {"line": 96, "type": "Typing", "severity": "medium", "message": "Missing return type hint on function. Use '-> Type:' for better performance.", "snippet": "  \n> func test_zero_gravity_strength():\n  \tgravity_manager.set_gravity_strength(0.0)\n"}, {"line": 98, "type": "Typing", "severity": "medium", "message": "Missing static type hint on variable. Adding types improves performance.", "snippet": "  \tgravity_manager.set_gravity_strength(0.0)\n> \tvar gravity_vector = gravity_manager.get_gravity_vector()\n  \tassert_eq(gravity_vector, Vector2.ZERO, \"Zero strength should result in zero gravity vector\")\n"}, {"line": 106, "type": "Typing", "severity": "medium", "message": "Missing return type hint on function. Use '-> Type:' for better performance.", "snippet": "  \n> func test_set_gravity_direction_emits_signal():\n  \twatch_signals(gravity_manager)\n"}, {"line": 112, "type": "Typing", "severity": "medium", "message": "Missing return type hint on function. Use '-> Type:' for better performance.", "snippet": "  \n> func test_set_gravity_strength_emits_signal():\n  \twatch_signals(gravity_manager)\n"}, {"line": 118, "type": "Typing", "severity": "medium", "message": "Missing return type hint on function. Use '-> Type:' for better performance.", "snippet": "  \n> func test_flip_gravity_emits_signal():\n  \twatch_signals(gravity_manager)\n"}, {"line": 128, "type": "Typing", "severity": "medium", "message": "Missing return type hint on function. Use '-> Type:' for better performance.", "snippet": "  \n> func test_reset_gravity_restores_defaults():\n  \tgravity_manager.set_gravity_direction(Vector2.LEFT)\n"}, {"line": 133, "type": "Typing", "severity": "medium", "message": "Missing static type hint on variable. Adding types improves performance.", "snippet": "  \t\n> \tvar gravity_vector = gravity_manager.get_gravity_vector()\n  \tvar strength = gravity_manager.get_gravity_strength()\n"}, {"line": 134, "type": "Typing", "severity": "medium", "message": "Missing static type hint on variable. Adding types improves performance.", "snippet": "  \tvar gravity_vector = gravity_manager.get_gravity_vector()\n> \tvar strength = gravity_manager.get_gravity_strength()\n  \t\n"}, {"line": 143, "type": "Typing", "severity": "medium", "message": "Missing return type hint on function. Use '-> Type:' for better performance.", "snippet": "  \n> func test_set_gravity_direction_with_zero_vector():\n  \tgravity_manager.set_gravity_direction(Vector2.ZERO)\n"}, {"line": 145, "type": "Typing", "severity": "medium", "message": "Missing static type hint on variable. Adding types improves performance.", "snippet": "  \tgravity_manager.set_gravity_direction(Vector2.ZERO)\n> \tvar gravity_vector = gravity_manager.get_gravity_vector()\n  \t# Behavior with zero vector is implementation-dependent\n"}, {"line": 151, "type": "Typing", "severity": "medium", "message": "Missing return type hint on function. Use '-> Type:' for better performance.", "snippet": "  \n> func test_negative_gravity_strength():\n  \tgravity_manager.set_gravity_strength(-1.0)\n"}, {"line": 153, "type": "Typing", "severity": "medium", "message": "Missing static type hint on variable. Adding types improves performance.", "snippet": "  \tgravity_manager.set_gravity_strength(-1.0)\n> \tvar strength = gravity_manager.get_gravity_strength()\n  \t# Behavior with negative strength is implementation-dependent\n"}, {"line": 158, "type": "Typing", "severity": "medium", "message": "Missing return type hint on function. Use '-> Type:' for better performance.", "snippet": "  \n> func test_extremely_high_gravity_strength():\n  \tgravity_manager.set_gravity_strength(1000.0)\n"}, {"line": 160, "type": "Typing", "severity": "medium", "message": "Missing static type hint on variable. Adding types improves performance.", "snippet": "  \tgravity_manager.set_gravity_strength(1000.0)\n> \tvar gravity_vector = gravity_manager.get_gravity_vector()\n  \tassert_true(gravity_vector.length() > 0, \"Should handle extremely high strength\")\n"}], "lines": 163}, {"path": "tests\\unit\\test_health_component.gd", "score": 42.0, "issues": [{"line": 8, "type": "Typing", "severity": "medium", "message": "Missing return type hint on function. Use '-> Type:' for better performance.", "snippet": "  \n> func before_each():\n  \thealth_component = HealthComponent.new()\n"}, {"line": 15, "type": "Typing", "severity": "medium", "message": "Missing return type hint on function. Use '-> Type:' for better performance.", "snippet": "  \n> func after_each():\n  \t# GUT will auto-free with add_child_autofree\n"}, {"line": 27, "type": "Typing", "severity": "medium", "message": "Missing static type hint on variable. Adding types improves performance.", "snippet": "  func test_health_initializes_at_zero_when_not_start_at_max():\n> \tvar comp = HealthComponent.new()\n  \tcomp.max_health = 100\n"}, {"line": 38, "type": "Typing", "severity": "medium", "message": "Missing return type hint on function. Use '-> Type:' for better performance.", "snippet": "  \n> func test_take_damage_reduces_health():\n  \thealth_component.take_damage(25, null)\n"}, {"line": 42, "type": "Typing", "severity": "medium", "message": "Missing return type hint on function. Use '-> Type:' for better performance.", "snippet": "  \n> func test_take_damage_emits_damaged_signal():\n  \twatch_signals(health_component)\n"}, {"line": 47, "type": "Typing", "severity": "medium", "message": "Missing return type hint on function. Use '-> Type:' for better performance.", "snippet": "  \n> func test_take_damage_emits_health_changed_signal():\n  \twatch_signals(health_component)\n"}, {"line": 52, "type": "Typing", "severity": "medium", "message": "Missing return type hint on function. Use '-> Type:' for better performance.", "snippet": "  \n> func test_health_cannot_go_below_zero():\n  \thealth_component.take_damage(150, null)\n"}, {"line": 56, "type": "Typing", "severity": "medium", "message": "Missing return type hint on function. Use '-> Type:' for better performance.", "snippet": "  \n> func test_take_damage_triggers_death_at_zero():\n  \twatch_signals(health_component)\n"}, {"line": 61, "type": "Typing", "severity": "medium", "message": "Missing return type hint on function. Use '-> Type:' for better performance.", "snippet": "  \n> func test_is_alive_returns_false_when_dead():\n  \thealth_component.take_damage(100, null)\n"}, {"line": 69, "type": "Typing", "severity": "medium", "message": "Missing return type hint on function. Use '-> Type:' for better performance.", "snippet": "  \n> func test_invincible_blocks_damage():\n  \thealth_component.set_invincible(1.0)\n"}, {"line": 74, "type": "Typing", "severity": "medium", "message": "Missing return type hint on function. Use '-> Type:' for better performance.", "snippet": "  \n> func test_invincibility_expires_after_duration():\n  \thealth_component.set_invincible(0.1)\n"}, {"line": 80, "type": "Typing", "severity": "medium", "message": "Missing return type hint on function. Use '-> Type:' for better performance.", "snippet": "  \n> func test_is_invincible_returns_true_when_active():\n  \thealth_component.set_invincible(1.0)\n"}, {"line": 84, "type": "Typing", "severity": "medium", "message": "Missing return type hint on function. Use '-> Type:' for better performance.", "snippet": "  \n> func test_is_invincible_returns_false_when_inactive():\n  \tassert_false(health_component.is_invincible(), \"is_invincible() should return false by default\")\n"}, {"line": 91, "type": "Typing", "severity": "medium", "message": "Missing return type hint on function. Use '-> Type:' for better performance.", "snippet": "  \n> func test_heal_increases_health():\n  \thealth_component.take_damage(50, null)\n"}, {"line": 96, "type": "Typing", "severity": "medium", "message": "Missing return type hint on function. Use '-> Type:' for better performance.", "snippet": "  \n> func test_heal_emits_healed_signal():\n  \thealth_component.take_damage(50, null)\n"}, {"line": 102, "type": "Typing", "severity": "medium", "message": "Missing return type hint on function. Use '-> Type:' for better performance.", "snippet": "  \n> func test_heal_cannot_exceed_max_health():\n  \thealth_component.take_damage(25, null)\n"}, {"line": 107, "type": "Typing", "severity": "medium", "message": "Missing return type hint on function. Use '-> Type:' for better performance.", "snippet": "  \n> func test_heal_does_nothing_at_full_health():\n  \twatch_signals(health_component)\n"}, {"line": 116, "type": "Typing", "severity": "medium", "message": "Missing return type hint on function. Use '-> Type:' for better performance.", "snippet": "  \n> func test_set_max_health_increases_capacity():\n  \thealth_component.set_max_health(150)\n"}, {"line": 120, "type": "Typing", "severity": "medium", "message": "Missing return type hint on function. Use '-> Type:' for better performance.", "snippet": "  \n> func test_set_max_health_maintains_current_health_percentage():\n  \thealth_component.take_damage(50, null) # 50/100 = 50%\n"}, {"line": 125, "type": "Typing", "severity": "medium", "message": "Missing return type hint on function. Use '-> Type:' for better performance.", "snippet": "  \n> func test_get_health_percentage_returns_correct_value():\n  \thealth_component.take_damage(25, null)\n"}, {"line": 133, "type": "Typing", "severity": "medium", "message": "Missing return type hint on function. Use '-> Type:' for better performance.", "snippet": "  \n> func test_negative_damage_does_nothing():\n  \thealth_component.take_damage(-10, null)\n"}, {"line": 137, "type": "Typing", "severity": "medium", "message": "Missing return type hint on function. Use '-> Type:' for better performance.", "snippet": "  \n> func test_zero_damage_does_nothing():\n  \twatch_signals(health_component)\n"}, {"line": 142, "type": "Typing", "severity": "medium", "message": "Missing return type hint on function. Use '-> Type:' for better performance.", "snippet": "  \n> func test_negative_healing_does_nothing():\n  \thealth_component.heal(-10)\n"}, {"line": 153, "type": "Typing", "severity": "medium", "message": "Missing return type hint on function. Use '-> Type:' for better performance.", "snippet": "  \n> func test_damage_at_max_health():\n  \t# Verify behavior when taking damage while at maximum health\n"}, {"line": 159, "type": "Typing", "severity": "medium", "message": "Missing return type hint on function. Use '-> Type:' for better performance.", "snippet": "  \n> func test_heal_above_max_health():\n  \t# Verify healing cannot exceed max health\n"}, {"line": 165, "type": "Typing", "severity": "medium", "message": "Missing return type hint on function. Use '-> Type:' for better performance.", "snippet": "  \n> func test_health_cannot_exceed_max_after_multiple_heals():\n  \thealth_component.take_damage(50, null) # Now at 50\n"}, {"line": 171, "type": "Typing", "severity": "medium", "message": "Missing return type hint on function. Use '-> Type:' for better performance.", "snippet": "  \n> func test_massive_damage_stops_at_zero():\n  \t# Verify health stops at exactly zero with massive damage\n"}, {"line": 176, "type": "Typing", "severity": "medium", "message": "Missing return type hint on function. Use '-> Type:' for better performance.", "snippet": "  \n> func test_health_at_zero_stays_at_zero():\n  \t# Verify health stays at zero after death\n"}, {"line": 183, "type": "Typing", "severity": "medium", "message": "Missing return type hint on function. Use '-> Type:' for better performance.", "snippet": "  \n> func test_cannot_heal_when_dead():\n  \thealth_component.take_damage(100, null) # Dead\n"}], "lines": 189}, {"path": "tests\\unit\\test_movement_component.gd", "score": 46.0, "issues": [{"line": 8, "type": "Typing", "severity": "medium", "message": "Missing return type hint on function. Use '-> Type:' for better performance.", "snippet": "  \n> func before_each():\n  \tmovement_component = MovementComponent.new()\n"}, {"line": 16, "type": "Typing", "severity": "medium", "message": "Missing return type hint on function. Use '-> Type:' for better performance.", "snippet": "  \n> func after_each():\n  \tmovement_component.free()\n"}, {"line": 26, "type": "Typing", "severity": "medium", "message": "Missing return type hint on function. Use '-> Type:' for better performance.", "snippet": "  \n> func test_movement_component_has_correct_default_values():\n  \tassert_eq(movement_component.speed, 200.0, \"Speed should be 200.0\")\n"}, {"line": 35, "type": "Typing", "severity": "medium", "message": "Missing return type hint on function. Use '-> Type:' for better performance.", "snippet": "  \n> func test_set_target_direction_accelerates_velocity():\n  \tmovement_component.set_target_direction(Vector2.RIGHT, false)\n"}, {"line": 40, "type": "Typing", "severity": "medium", "message": "Missing return type hint on function. Use '-> Type:' for better performance.", "snippet": "  \n> func test_set_target_direction_with_run_uses_max_speed():\n  \tmovement_component.set_target_direction(Vector2.RIGHT, true)\n"}, {"line": 45, "type": "Typing", "severity": "medium", "message": "Missing return type hint on function. Use '-> Type:' for better performance.", "snippet": "  \n> func test_set_target_direction_without_run_uses_normal_speed():\n  \tmovement_component.set_target_direction(Vector2.RIGHT, false)\n"}, {"line": 50, "type": "Typing", "severity": "medium", "message": "Missing return type hint on function. Use '-> Type:' for better performance.", "snippet": "  \n> func test_set_target_clamps_to_max_speed():\n  \tmovement_component.set_target(Vector2.RIGHT * 500.0) # Target beyond max speed\n"}, {"line": 59, "type": "Typing", "severity": "medium", "message": "Missing return type hint on function. Use '-> Type:' for better performance.", "snippet": "  \n> func test_apply_friction_reduces_velocity():\n  \tmovement_component.velocity = Vector2(100, 0)\n"}, {"line": 64, "type": "Typing", "severity": "medium", "message": "Missing return type hint on function. Use '-> Type:' for better performance.", "snippet": "  \n> func test_friction_stops_at_zero():\n  \tmovement_component.velocity = Vector2(10, 0)\n"}, {"line": 69, "type": "Typing", "severity": "medium", "message": "Missing return type hint on function. Use '-> Type:' for better performance.", "snippet": "  \n> func test_air_friction_is_weaker_than_ground_friction():\n  \tvar ground_vel = Vector2(100, 0)\n"}, {"line": 70, "type": "Typing", "severity": "medium", "message": "Missing static type hint on variable. Adding types improves performance.", "snippet": "  func test_air_friction_is_weaker_than_ground_friction():\n> \tvar ground_vel = Vector2(100, 0)\n  \tvar air_vel = Vector2(100, 0)\n"}, {"line": 71, "type": "Typing", "severity": "medium", "message": "Missing static type hint on variable. Adding types improves performance.", "snippet": "  \tvar ground_vel = Vector2(100, 0)\n> \tvar air_vel = Vector2(100, 0)\n  \t\n"}, {"line": 73, "type": "Typing", "severity": "medium", "message": "Missing static type hint on variable. Adding types improves performance.", "snippet": "  \t\n> \tvar ground_comp = MovementComponent.new()\n  \tground_comp.friction = 800.0\n"}, {"line": 79, "type": "Typing", "severity": "medium", "message": "Missing static type hint on variable. Adding types improves performance.", "snippet": "  \t\n> \tvar air_comp = MovementComponent.new()\n  \tair_comp.friction = 800.0\n"}, {"line": 94, "type": "Typing", "severity": "medium", "message": "Missing return type hint on function. Use '-> Type:' for better performance.", "snippet": "  \n> func test_apply_impulse_adds_to_velocity():\n  \tvar initial_velocity = movement_component.velocity\n"}, {"line": 95, "type": "Typing", "severity": "medium", "message": "Missing static type hint on variable. Adding types improves performance.", "snippet": "  func test_apply_impulse_adds_to_velocity():\n> \tvar initial_velocity = movement_component.velocity\n  \tmovement_component.apply_impulse(Vector2(100, -200))\n"}, {"line": 99, "type": "Typing", "severity": "medium", "message": "Missing return type hint on function. Use '-> Type:' for better performance.", "snippet": "  \n> func test_apply_impulse_emits_velocity_changed_signal():\n  \twatch_signals(movement_component)\n"}, {"line": 108, "type": "Typing", "severity": "medium", "message": "Missing return type hint on function. Use '-> Type:' for better performance.", "snippet": "  \n> func test_set_velocity_updates_velocity():\n  \tmovement_component.set_velocity(Vector2(150, -100))\n"}, {"line": 112, "type": "Typing", "severity": "medium", "message": "Missing return type hint on function. Use '-> Type:' for better performance.", "snippet": "  \n> func test_set_velocity_emits_signal():\n  \twatch_signals(movement_component)\n"}, {"line": 117, "type": "Typing", "severity": "medium", "message": "Missing return type hint on function. Use '-> Type:' for better performance.", "snippet": "  \n> func test_get_velocity_returns_current_velocity():\n  \tmovement_component.velocity = Vector2(123, 456)\n"}, {"line": 125, "type": "Typing", "severity": "medium", "message": "Missing return type hint on function. Use '-> Type:' for better performance.", "snippet": "  \n> func test_update_with_zero_delta_does_nothing():\n  \tvar initial_velocity = movement_component.velocity\n"}, {"line": 126, "type": "Typing", "severity": "medium", "message": "Missing static type hint on variable. Adding types improves performance.", "snippet": "  func test_update_with_zero_delta_does_nothing():\n> \tvar initial_velocity = movement_component.velocity\n  \tmovement_component.update(0.0)\n"}, {"line": 130, "type": "Typing", "severity": "medium", "message": "Missing return type hint on function. Use '-> Type:' for better performance.", "snippet": "  \n> func test_update_applies_acceleration_over_time():\n  \tmovement_component.set_target_direction(Vector2.RIGHT, false)\n"}, {"line": 133, "type": "Typing", "severity": "medium", "message": "Missing static type hint on variable. Adding types improves performance.", "snippet": "  \tmovement_component.update(0.05) # Small update\n> \tvar vel_after_small = movement_component.velocity.x\n  \tassert_gt(vel_after_small, 0, \"Velocity should increase after first update\")\n"}, {"line": 145, "type": "Typing", "severity": "medium", "message": "Missing return type hint on function. Use '-> Type:' for better performance.", "snippet": "  \n> func test_negative_acceleration_is_handled():\n  \tmovement_component.acceleration = -1000.0\n"}, {"line": 152, "type": "Typing", "severity": "medium", "message": "Missing return type hint on function. Use '-> Type:' for better performance.", "snippet": "  \n> func test_zero_friction_maintains_velocity():\n  \tmovement_component.friction = 0.0\n"}, {"line": 159, "type": "Typing", "severity": "medium", "message": "Missing return type hint on function. Use '-> Type:' for better performance.", "snippet": "  \n> func test_extremely_high_delta_is_clamped():\n  \tmovement_component.set_target_direction(Vector2.RIGHT, false)\n"}], "lines": 163}, {"path": "scripts\\autoload\\gravity_manager.gd", "score": 100.0, "issues": [], "lines": 101}, {"path": "scripts\\collectibles\\gravity_core.gd", "score": 96.0, "issues": [{"line": 35, "type": "Typing", "severity": "medium", "message": "Missing static type hint on variable. Adding types improves performance.", "snippet": "  \ttime_elapsed += delta\n> \tvar bob_offset = sin(time_elapsed * bob_speed) * bob_amplitude\n  \tglobal_position.y = initial_position.y + bob_offset\n"}, {"line": 70, "type": "Typing", "severity": "medium", "message": "Missing static type hint on variable. Adding types improves performance.", "snippet": "  \t# Create tween for smooth animation\n> \tvar tween = create_tween()\n  \ttween.set_parallel(true)\n"}], "lines": 89}, {"path": "scripts\\components\\animation_controller_component.gd", "score": 100.0, "issues": [], "lines": 89}, {"path": "scripts\\components\\collectible_component.gd", "score": 100.0, "issues": [], "lines": 81}, {"path": "scripts\\components\\damage_component.gd", "score": 96.0, "issues": [{"line": 46, "type": "Typing", "severity": "medium", "message": "Missing static type hint on variable. Adding types improves performance.", "snippet": "  \t# Check if the area's parent is in damage groups\n> \tvar parent = area.get_parent()\n  \tif parent:\n"}, {"line": 79, "type": "Typing", "severity": "medium", "message": "Missing static type hint on variable. Adding types improves performance.", "snippet": "  \t\tif apply_knockback and target is CharacterBody2D:\n> \t\t\tvar direction = (target.global_position - global_position).normalized()\n  \t\t\t\n"}], "lines": 105}, {"path": "scripts\\components\\health_component.gd", "score": 94.0, "issues": [{"line": 42, "type": "Typing", "severity": "medium", "message": "Missing static type hint on variable. Adding types improves performance.", "snippet": "  \t\n> \tvar actual_damage = min(amount, current_health)\n  \tcurrent_health -= actual_damage\n"}, {"line": 62, "type": "Typing", "severity": "medium", "message": "Missing static type hint on variable. Adding types improves performance.", "snippet": "  \t\n> \tvar actual_heal = min(amount, max_health - current_health)\n  \t\n"}, {"line": 113, "type": "Typing", "severity": "medium", "message": "Missing static type hint on variable. Adding types improves performance.", "snippet": "  \t\n> \tvar health_percent = get_health_percent()\n  \tmax_health = new_max\n"}], "lines": 117}, {"path": "scripts\\components\\movement_component.gd", "score": 98.0, "issues": [{"line": 48, "type": "Typing", "severity": "medium", "message": "Missing static type hint on variable. Adding types improves performance.", "snippet": "  \t\"\"\"Apply friction to slow down velocity\"\"\"\n> \tvar friction_amount = friction if is_grounded else air_friction\n  \tvelocity = velocity.move_toward(Vector2.ZERO, friction_amount * delta)\n"}], "lines": 97}, {"path": "scripts\\enemies\\antigrav_orb.gd", "score": 68.0, "issues": [{"line": 61, "type": "Typing", "severity": "medium", "message": "Missing static type hint on variable. Adding types improves performance.", "snippet": "  \tif state == \"idle\":\n> \t\tvar time = Time.get_ticks_msec() * 0.001\n  \t\t# Gentle vertical bobbing\n"}, {"line": 61, "type": "Performance", "severity": "medium", "message": "Potentially redundant computation in process loop. Consider caching result.", "snippet": "  \tif state == \"idle\":\n> \t\tvar time = Time.get_ticks_msec() * 0.001\n  \t\t# Gentle vertical bobbing\n"}, {"line": 70, "type": "Typing", "severity": "medium", "message": "Missing return type hint on function. Use '-> Type:' for better performance.", "snippet": "  \n> func _patrol(delta):\n  \t\"\"\"Patrol in various patterns to show off antigravity\"\"\"\n"}, {"line": 70, "type": "Typing", "severity": "medium", "message": "Missing type hint on parameter. Use 'param: Type' syntax.", "snippet": "  \n> func _patrol(delta):\n  \t\"\"\"Patrol in various patterns to show off antigravity\"\"\"\n"}, {"line": 80, "type": "Typing", "severity": "medium", "message": "Missing static type hint on variable. Adding types improves performance.", "snippet": "  \t\t2: # Circular\n> \t\t\tvar angle = Time.get_ticks_msec() * 0.001\n  \t\t\tvelocity.x = cos(angle) * float_speed\n"}, {"line": 88, "type": "Typing", "severity": "medium", "message": "Missing return type hint on function. Use '-> Type:' for better performance.", "snippet": "  \n> func _perform_gravity_flip():\n  \t\"\"\"Perform a gravity flip with dramatic motion\"\"\"\n"}, {"line": 95, "type": "Typing", "severity": "medium", "message": "Missing static type hint on variable. Adding types improves performance.", "snippet": "  \t# Store original values\n> \tvar original_scale = animated_sprite.scale\n  \tvar original_rotation = rotation\n"}, {"line": 96, "type": "Typing", "severity": "medium", "message": "Missing static type hint on variable. Adding types improves performance.", "snippet": "  \tvar original_scale = animated_sprite.scale\n> \tvar original_rotation = rotation\n  \t\n"}, {"line": 99, "type": "Typing", "severity": "medium", "message": "Missing static type hint on variable. Adding types improves performance.", "snippet": "  \t# Phase 1: Charge up (0.3 seconds)\n> \tvar tween = create_tween()\n  \ttween.set_parallel(true)\n"}, {"line": 128, "type": "Typing", "severity": "medium", "message": "Missing return type hint on function. Use '-> Type:' for better performance.", "snippet": "  \n> func take_damage(amount: int):\n  \t\"\"\"Take damage and handle death\"\"\"\n"}, {"line": 135, "type": "Typing", "severity": "medium", "message": "Missing static type hint on variable. Adding types improves performance.", "snippet": "  \t# Knockback (loses control briefly)\n> \tvar knockback_dir = Vector2(randf_range(-1, 1), randf_range(-1, 1)).normalized()\n  \tvelocity = knockback_dir * 300.0\n"}, {"line": 145, "type": "Typing", "severity": "medium", "message": "Missing return type hint on function. Use '-> Type:' for better performance.", "snippet": "  \n> func die():\n  \t\"\"\"Handle enemy death\"\"\"\n"}, {"line": 151, "type": "Typing", "severity": "medium", "message": "Missing return type hint on function. Use '-> Type:' for better performance.", "snippet": "  \n> func _on_detection_area_body_entered(body):\n  \t\"\"\"Player detected - start patrolling to show off\"\"\"\n"}, {"line": 151, "type": "Typing", "severity": "medium", "message": "Missing type hint on parameter. Use 'param: Type' syntax.", "snippet": "  \n> func _on_detection_area_body_entered(body):\n  \t\"\"\"Player detected - start patrolling to show off\"\"\"\n"}, {"line": 158, "type": "Typing", "severity": "medium", "message": "Missing return type hint on function. Use '-> Type:' for better performance.", "snippet": "  \n> func _on_detection_area_body_exited(body):\n  \t\"\"\"Player left - return to idle\"\"\"\n"}, {"line": 158, "type": "Typing", "severity": "medium", "message": "Missing type hint on parameter. Use 'param: Type' syntax.", "snippet": "  \n> func _on_detection_area_body_exited(body):\n  \t\"\"\"Player left - return to idle\"\"\"\n"}], "lines": 163}, {"path": "scripts\\enemies\\flyer_drone.gd", "score": 74.0, "issues": [{"line": 41, "type": "Performance", "severity": "medium", "message": "Potentially redundant computation in process loop. Consider caching result.", "snippet": "  \tif not is_on_floor():\n> \t\tvelocity += GravityManager.get_gravity_vector() * delta\n  \t\n"}, {"line": 50, "type": "Typing", "severity": "medium", "message": "Missing return type hint on function. Use '-> Type:' for better performance.", "snippet": "  \n> func _patrol(delta):\n  \t\"\"\"Simple back-and-forth patrol\"\"\"\n"}, {"line": 50, "type": "Typing", "severity": "medium", "message": "Missing type hint on parameter. Use 'param: Type' syntax.", "snippet": "  \n> func _patrol(delta):\n  \t\"\"\"Simple back-and-forth patrol\"\"\"\n"}, {"line": 64, "type": "Typing", "severity": "medium", "message": "Missing return type hint on function. Use '-> Type:' for better performance.", "snippet": "  \n> func _chase_player(delta):\n  \t\"\"\"Chase the player\"\"\"\n"}, {"line": 64, "type": "Typing", "severity": "medium", "message": "Missing type hint on parameter. Use 'param: Type' syntax.", "snippet": "  \n> func _chase_player(delta):\n  \t\"\"\"Chase the player\"\"\"\n"}, {"line": 70, "type": "Typing", "severity": "medium", "message": "Missing static type hint on variable. Adding types improves performance.", "snippet": "  \t\n> \tvar direction = (player.global_position - global_position).normalized()\n  \tvelocity.x = direction.x * chase_speed\n"}, {"line": 78, "type": "Typing", "severity": "medium", "message": "Missing return type hint on function. Use '-> Type:' for better performance.", "snippet": "  \n> func take_damage(amount: int):\n  \t\"\"\"Take damage and handle death\"\"\"\n"}, {"line": 85, "type": "Typing", "severity": "medium", "message": "Missing static type hint on variable. Adding types improves performance.", "snippet": "  \t# Knockback\n> \tvar knockback_dir = - velocity.normalized() if velocity.length() > 0 else Vector2.LEFT\n  \tvelocity = knockback_dir * 200.0\n"}, {"line": 95, "type": "Typing", "severity": "medium", "message": "Missing return type hint on function. Use '-> Type:' for better performance.", "snippet": "  \n> func die():\n  \t\"\"\"Handle enemy death\"\"\"\n"}, {"line": 101, "type": "Typing", "severity": "medium", "message": "Missing return type hint on function. Use '-> Type:' for better performance.", "snippet": "  \n> func _on_detection_area_body_entered(body):\n  \t\"\"\"Player detected\"\"\"\n"}, {"line": 101, "type": "Typing", "severity": "medium", "message": "Missing type hint on parameter. Use 'param: Type' syntax.", "snippet": "  \n> func _on_detection_area_body_entered(body):\n  \t\"\"\"Player detected\"\"\"\n"}, {"line": 111, "type": "Typing", "severity": "medium", "message": "Missing return type hint on function. Use '-> Type:' for better performance.", "snippet": "  \n> func _on_detection_area_body_exited(body):\n  \t\"\"\"Player left detection range\"\"\"\n"}, {"line": 111, "type": "Typing", "severity": "medium", "message": "Missing type hint on parameter. Use 'param: Type' syntax.", "snippet": "  \n> func _on_detection_area_body_exited(body):\n  \t\"\"\"Player left detection range\"\"\"\n"}], "lines": 116}, {"path": "scripts\\enemies\\turret.gd", "score": 76.0, "issues": [{"line": 31, "type": "Typing", "severity": "medium", "message": "Missing return type hint on function. Use '-> Type:' for better performance.", "snippet": "  \n> func _aim_at_player():\n  \t\"\"\"Rotate turret to face player\"\"\"\n"}, {"line": 33, "type": "Typing", "severity": "medium", "message": "Missing static type hint on variable. Adding types improves performance.", "snippet": "  \t\"\"\"Rotate turret to face player\"\"\"\n> \tvar angle = global_position.angle_to_point(player.global_position)\n  \trotation = angle\n"}, {"line": 41, "type": "Typing", "severity": "medium", "message": "Missing return type hint on function. Use '-> Type:' for better performance.", "snippet": "  \n> func fire_projectile():\n  \t\"\"\"Fire a projectile at the player\"\"\"\n"}, {"line": 50, "type": "Typing", "severity": "medium", "message": "Missing static type hint on variable. Adding types improves performance.", "snippet": "  \t# Spawn projectile\n> \tvar projectile = projectile_scene.instantiate()\n  \tget_parent().add_child(projectile)\n"}, {"line": 55, "type": "Typing", "severity": "medium", "message": "Missing static type hint on variable. Adding types improves performance.", "snippet": "  \t# Set projectile direction\n> \tvar direction = (player.global_position - barrel_marker.global_position).normalized()\n  \tif projectile.has_method(\"set_direction\"):\n"}, {"line": 67, "type": "Typing", "severity": "medium", "message": "Missing return type hint on function. Use '-> Type:' for better performance.", "snippet": "  \n> func take_damage(amount: int):\n  \t\"\"\"Take damage and handle death\"\"\"\n"}, {"line": 80, "type": "Typing", "severity": "medium", "message": "Missing return type hint on function. Use '-> Type:' for better performance.", "snippet": "  \n> func die():\n  \t\"\"\"Handle enemy death\"\"\"\n"}, {"line": 86, "type": "Typing", "severity": "medium", "message": "Missing return type hint on function. Use '-> Type:' for better performance.", "snippet": "  \n> func _on_detection_area_body_entered(body):\n  \t\"\"\"Player detected\"\"\"\n"}, {"line": 86, "type": "Typing", "severity": "medium", "message": "Missing type hint on parameter. Use 'param: Type' syntax.", "snippet": "  \n> func _on_detection_area_body_entered(body):\n  \t\"\"\"Player detected\"\"\"\n"}, {"line": 92, "type": "Typing", "severity": "medium", "message": "Missing return type hint on function. Use '-> Type:' for better performance.", "snippet": "  \n> func _on_detection_area_body_exited(body):\n  \t\"\"\"Player left detection range\"\"\"\n"}, {"line": 92, "type": "Typing", "severity": "medium", "message": "Missing type hint on parameter. Use 'param: Type' syntax.", "snippet": "  \n> func _on_detection_area_body_exited(body):\n  \t\"\"\"Player left detection range\"\"\"\n"}, {"line": 100, "type": "Typing", "severity": "medium", "message": "Missing return type hint on function. Use '-> Type:' for better performance.", "snippet": "  \n> func _on_fire_timer_timeout():\n  \t\"\"\"Fire timer expired, can fire again\"\"\"\n"}], "lines": 105}, {"path": "scripts\\gravity\\gravity_zone.gd", "score": 99.0, "issues": [{"line": 30, "type": "Cleanup", "severity": "low", "message": "Debug 'print()' call found. Use 'print_debug()' or remove.", "snippet": "  \t\t_apply_zone_gravity()\n> \t\tprint(\"Player entered \", zone_type, \" gravity zone\")\n  \n"}, {"line": 40, "type": "Cleanup", "severity": "low", "message": "Debug 'print()' call found. Use 'print_debug()' or remove.", "snippet": "  \t\t\t_restore_original_gravity()\n> \t\t\tprint(\"Player exited gravity zone\")\n  \n"}], "lines": 69}, {"path": "scripts\\level\\checkpoint.gd", "score": 96.0, "issues": [{"line": 48, "type": "Typing", "severity": "medium", "message": "Missing static type hint on variable. Adding types improves performance.", "snippet": "  \t# Update level manager if it exists\n> \tvar level = get_tree().get_first_node_in_group(\"level\")\n  \tif level and level.has_method(\"set_checkpoint\"):\n"}, {"line": 60, "type": "Typing", "severity": "medium", "message": "Missing static type hint on variable. Adding types improves performance.", "snippet": "  \t# Create a simple pulse effect\n> \tvar tween = create_tween()\n  \ttween.set_loops(2)\n"}], "lines": 80}, {"path": "scripts\\level\\level_1_manager.gd", "score": 85.0, "issues": [{"line": 43, "type": "Typing", "severity": "medium", "message": "Missing static type hint on variable. Adding types improves performance.", "snippet": "  \tif player and player.has_node(\"HealthComponent\"):\n> \t\tvar health = player.get_node(\"HealthComponent\")\n  \t\thealth.died.connect(_on_player_died)\n"}, {"line": 52, "type": "Typing", "severity": "medium", "message": "Missing static type hint on variable. Adding types improves performance.", "snippet": "  \t\"\"\"Connect to all gravity core collectibles\"\"\"\n> \tvar cores = get_tree().get_nodes_in_group(\"gravity_cores\")\n  \tfor core in cores:\n"}, {"line": 64, "type": "Typing", "severity": "medium", "message": "Missing static type hint on variable. Adding types improves performance.", "snippet": "  \t# Update HUD\n> \tvar hud = get_tree().get_first_node_in_group(\"hud\")\n  \tif hud and hud.has_method(\"add_core\"):\n"}, {"line": 70, "type": "Cleanup", "severity": "low", "message": "Debug 'print()' call found. Use 'print_debug()' or remove.", "snippet": "  \tif cores_collected >= total_gravity_cores:\n> \t\tprint(\"All gravity cores collected!\")\n  \n"}, {"line": 77, "type": "Cleanup", "severity": "low", "message": "Debug 'print()' call found. Use 'print_debug()' or remove.", "snippet": "  \tcheckpoint_reached.emit(checkpoint)\n> \tprint(\"Checkpoint reached: \", checkpoint.get_checkpoint_id())\n  \n"}, {"line": 85, "type": "Typing", "severity": "medium", "message": "Missing static type hint on variable. Adding types improves performance.", "snippet": "  \t\n> \tvar spawn_position = Vector2.ZERO\n  \t\n"}, {"line": 97, "type": "Typing", "severity": "medium", "message": "Missing static type hint on variable. Adding types improves performance.", "snippet": "  \tif player.has_node(\"HealthComponent\"):\n> \t\tvar health = player.get_node(\"HealthComponent\")\n  \t\thealth.revive()\n"}, {"line": 132, "type": "Typing", "severity": "medium", "message": "Missing static type hint on variable. Adding types improves performance.", "snippet": "  \t\"\"\"Update HUD with current stats\"\"\"\n> \tvar hud = get_tree().get_first_node_in_group(\"hud\")\n  \tif hud:\n"}, {"line": 145, "type": "Typing", "severity": "medium", "message": "Missing static type hint on variable. Adding types improves performance.", "snippet": "  \tif tutorial_prompts.has(room_id):\n> \t\tvar tutorial = get_tree().get_first_node_in_group(\"tutorial_prompt\")\n  \t\tif tutorial and tutorial.has_method(\"show_prompt\"):\n"}], "lines": 155}, {"path": "scripts\\level\\level_end_trigger.gd", "score": 85.0, "issues": [{"line": 39, "type": "Typing", "severity": "medium", "message": "Missing static type hint on variable. Adding types improves performance.", "snippet": "  \t# Gather completion stats\n> \tvar stats = _gather_stats()\n  \t\n"}, {"line": 56, "type": "Typing", "severity": "medium", "message": "Missing static type hint on variable. Adding types improves performance.", "snippet": "  \t\"\"\"Gather level completion statistics\"\"\"\n> \tvar stats = {\n  \t\t\"cores_collected\": 0,\n"}, {"line": 65, "type": "Typing", "severity": "medium", "message": "Missing static type hint on variable. Adding types improves performance.", "snippet": "  \t# Get level manager stats if available\n> \tvar level = get_tree().get_first_node_in_group(\"level\")\n  \tif level:\n"}, {"line": 82, "type": "Typing", "severity": "medium", "message": "Missing static type hint on variable. Adding types improves performance.", "snippet": "  \t# Create completion UI\n> \tvar message = \"GRAVITY CORE SYNCHRONIZED\\n\"\n  \tmessage += \"New Ability Unlocked: %s\\n\\n\" % unlock_ability.to_upper().replace(\"_\", \" \")\n"}, {"line": 87, "type": "Typing", "severity": "medium", "message": "Missing static type hint on variable. Adding types improves performance.", "snippet": "  \tif stats.completion_time > 0:\n> \t\tvar minutes = int(stats.completion_time / 60)\n  \t\tvar seconds = int(stats.completion_time) % 60\n"}, {"line": 88, "type": "Typing", "severity": "medium", "message": "Missing static type hint on variable. Adding types improves performance.", "snippet": "  \t\tvar minutes = int(stats.completion_time / 60)\n> \t\tvar seconds = int(stats.completion_time) % 60\n  \t\tmessage += \"Time: %02d:%02d\\n\" % [minutes, seconds]\n"}, {"line": 92, "type": "Typing", "severity": "medium", "message": "Missing static type hint on variable. Adding types improves performance.", "snippet": "  \t# Show via tutorial prompt if available\n> \tvar tutorial = get_tree().get_first_node_in_group(\"tutorial_prompt\")\n  \tif tutorial and tutorial.has_method(\"show_prompt\"):\n"}, {"line": 96, "type": "Cleanup", "severity": "low", "message": "Debug 'print()' call found. Use 'print_debug()' or remove.", "snippet": "  \telse:\n> \t\tprint(message)\n  \n"}, {"line": 103, "type": "Cleanup", "severity": "low", "message": "Debug 'print()' call found. Use 'print_debug()' or remove.", "snippet": "  \t\t# Return to main menu or level select\n> \t\tprint(\"Level complete! No next level specified.\")\n  \t\t# Could load main menu here\n"}], "lines": 113}, {"path": "scripts\\level\\level_manager.gd", "score": 93.5, "issues": [{"line": 51, "type": "Typing", "severity": "medium", "message": "Missing static type hint on variable. Adding types improves performance.", "snippet": "  \t\n> \tvar collectibles_node = $Collectibles\n  \tfor child in collectibles_node.get_children():\n"}, {"line": 61, "type": "Typing", "severity": "medium", "message": "Missing static type hint on variable. Adding types improves performance.", "snippet": "  \t\n> \tvar checkpoints_node = $Checkpoints\n  \tfor child in checkpoints_node.get_children():\n"}, {"line": 78, "type": "Typing", "severity": "medium", "message": "Missing static type hint on variable. Adding types improves performance.", "snippet": "  \t# Update HUD if it exists\n> \tvar hud = get_node_or_null(\"/root/GameHUD\")\n  \tif hud and hud.has_method(\"update_collectibles\"):\n"}, {"line": 92, "type": "Cleanup", "severity": "low", "message": "Debug 'print()' call found. Use 'print_debug()' or remove.", "snippet": "  \t# Transition to next level or show completion screen\n> \tprint(\"Level 1 Complete! Gravity Cores: %d/%d\" % [gravity_cores_collected, total_gravity_cores])\n  \n"}], "lines": 93}, {"path": "scripts\\level\\moving_platform.gd", "score": 94.0, "issues": [{"line": 44, "type": "Typing", "severity": "medium", "message": "Missing static type hint on variable. Adding types improves performance.", "snippet": "  \t# Move towards current target\n> \tvar direction = (current_target - global_position).normalized()\n  \tvar distance_to_target = global_position.distance_to(current_target)\n"}, {"line": 45, "type": "Typing", "severity": "medium", "message": "Missing static type hint on variable. Adding types improves performance.", "snippet": "  \tvar direction = (current_target - global_position).normalized()\n> \tvar distance_to_target = global_position.distance_to(current_target)\n  \t\n"}, {"line": 48, "type": "Typing", "severity": "medium", "message": "Missing static type hint on variable. Adding types improves performance.", "snippet": "  \t# Calculate movement\n> \tvar move_amount = move_speed * delta\n  \t\n"}], "lines": 93}, {"path": "scripts\\player\\player.gd", "score": 85.5, "issues": [{"line": 125, "type": "Typing", "severity": "medium", "message": "Missing static type hint on variable. Adding types improves performance.", "snippet": "  \t\t\n> \t\tvar gravity = GravityManager.get_gravity_vector()\n  \t\t\n"}, {"line": 134, "type": "Typing", "severity": "medium", "message": "Missing static type hint on variable. Adding types improves performance.", "snippet": "  \t\t# Cap fall speed\n> \t\tvar speed_in_gravity_dir = velocity.dot(gravity.normalized())\n  \t\tif speed_in_gravity_dir > max_fall_speed:\n"}, {"line": 141, "type": "Typing", "severity": "medium", "message": "Missing static type hint on variable. Adding types improves performance.", "snippet": "  \t# Determine target speed\n> \tvar target_speed = run_speed if run_pressed else move_speed\n  \tis_running = run_pressed and abs(move_input) > 0.1\n"}, {"line": 155, "type": "Typing", "severity": "medium", "message": "Missing static type hint on variable. Adding types improves performance.", "snippet": "  \t# Check if we can jump (on ground or coyote time)\n> \tvar can_jump = coyote_timer > 0\n  \t\n"}, {"line": 158, "type": "Typing", "severity": "medium", "message": "Missing static type hint on variable. Adding types improves performance.", "snippet": "  \t# Check if jump was buffered\n> \tvar wants_to_jump = jump_buffer_timer > 0\n  \t\n"}, {"line": 177, "type": "Typing", "severity": "medium", "message": "Missing static type hint on variable. Adding types improves performance.", "snippet": "  \telse:\n> \t\tvar gravity_dir = GravityManager.gravity_direction\n  \t\tvelocity = - gravity_dir * abs(jump_velocity)\n"}, {"line": 180, "type": "Cleanup", "severity": "low", "message": "Debug 'print()' call found. Use 'print_debug()' or remove.", "snippet": "  \t\n> \tprint(\"Jump! Velocity: \", velocity)\n  \n"}, {"line": 201, "type": "Cleanup", "severity": "low", "message": "Debug 'print()' call found. Use 'print_debug()' or remove.", "snippet": "  \t\n> \tprint(\"Gravity flip activated!\")\n  \n"}, {"line": 242, "type": "Cleanup", "severity": "low", "message": "Debug 'print()' call found. Use 'print_debug()' or remove.", "snippet": "  func _on_gravity_changed(new_direction: Vector2) -> void:\n> \tprint(\"Player: Gravity changed to \", new_direction)\n  \t# Could add visual effects here\n"}, {"line": 248, "type": "Cleanup", "severity": "low", "message": "Debug 'print()' call found. Use 'print_debug()' or remove.", "snippet": "  func take_damage(amount: int) -> void:\n> \tprint(\"Player took \", amount, \" damage!\")\n  \tanimated_sprite.play(\"damage\")\n"}, {"line": 265, "type": "Cleanup", "severity": "low", "message": "Debug 'print()' call found. Use 'print_debug()' or remove.", "snippet": "  \thas_gravity_flip = true\n> \tprint(\"Gravity flip unlocked!\")\n  \t# TODO: Show UI notification\n"}], "lines": 268}, {"path": "scripts\\projectiles\\projectile.gd", "score": 88.0, "issues": [{"line": 40, "type": "Performance", "severity": "medium", "message": "Potentially redundant computation in process loop. Consider caching result.", "snippet": "  \tif affected_by_gravity:\n> \t\tdirection += GravityManager.get_gravity_vector().normalized() * delta * 2.0\n  \t\tdirection = direction.normalized()\n"}, {"line": 47, "type": "Typing", "severity": "medium", "message": "Missing return type hint on function. Use '-> Type:' for better performance.", "snippet": "  \n> func set_direction(new_direction: Vector2):\n  \t\"\"\"Set the projectile's movement direction\"\"\"\n"}, {"line": 52, "type": "Typing", "severity": "medium", "message": "Missing return type hint on function. Use '-> Type:' for better performance.", "snippet": "  \n> func _on_body_entered(body):\n  \t\"\"\"Handle collision with player or environment\"\"\"\n"}, {"line": 52, "type": "Typing", "severity": "medium", "message": "Missing type hint on parameter. Use 'param: Type' syntax.", "snippet": "  \n> func _on_body_entered(body):\n  \t\"\"\"Handle collision with player or environment\"\"\"\n"}, {"line": 63, "type": "Typing", "severity": "medium", "message": "Missing return type hint on function. Use '-> Type:' for better performance.", "snippet": "  \n> func _on_screen_exited():\n  \t\"\"\"Destroy projectile when it leaves the screen\"\"\"\n"}, {"line": 68, "type": "Typing", "severity": "medium", "message": "Missing return type hint on function. Use '-> Type:' for better performance.", "snippet": "  \n> func _destroy():\n  \t\"\"\"Play impact animation and destroy\"\"\"\n"}], "lines": 73}, {"path": "scripts\\ui\\game_hud.gd", "score": 94.0, "issues": [{"line": 32, "type": "Typing", "severity": "medium", "message": "Missing static type hint on variable. Adding types improves performance.", "snippet": "  \t# Calculate hearts to show\n> \tvar hearts_to_show = ceili(float(maximum) / 20.0) # 1 heart per 20 HP\n  \tvar filled_hearts = ceili(float(current) / 20.0)\n"}, {"line": 33, "type": "Typing", "severity": "medium", "message": "Missing static type hint on variable. Adding types improves performance.", "snippet": "  \tvar hearts_to_show = ceili(float(maximum) / 20.0) # 1 heart per 20 HP\n> \tvar filled_hearts = ceili(float(current) / 20.0)\n  \t\n"}, {"line": 37, "type": "Typing", "severity": "medium", "message": "Missing static type hint on variable. Adding types improves performance.", "snippet": "  \tfor i in range(hearts_to_show):\n> \t\tvar heart = TextureRect.new()\n  \t\t\n"}], "lines": 82}, {"path": "scripts\\ui\\tutorial_prompt.gd", "score": 96.0, "issues": [{"line": 45, "type": "Typing", "severity": "medium", "message": "Missing static type hint on variable. Adding types improves performance.", "snippet": "  \t\n> \tvar tween = create_tween()\n  \ttween.tween_property(self, \"modulate:a\", 1.0, fade_duration)\n"}, {"line": 64, "type": "Typing", "severity": "medium", "message": "Missing static type hint on variable. Adding types improves performance.", "snippet": "  \t# Fade out\n> \tvar tween = create_tween()\n  \ttween.tween_property(self, \"modulate:a\", 0.0, fade_duration)\n"}], "lines": 74}, {"path": "scripts\\components\\ai\\chase_ai.gd", "score": 88.0, "issues": [{"line": 44, "type": "Typing", "severity": "medium", "message": "Missing static type hint on variable. Adding types improves performance.", "snippet": "  \t\n> \tvar distance = entity.global_position.distance_to(current_target.global_position)\n  \t\n"}, {"line": 52, "type": "Typing", "severity": "medium", "message": "Missing static type hint on variable. Adding types improves performance.", "snippet": "  \t# Chase target\n> \tvar direction = (current_target.global_position - entity.global_position).normalized()\n  \treturn direction * chase_speed\n"}, {"line": 97, "type": "Typing", "severity": "medium", "message": "Missing static type hint on variable. Adding types improves performance.", "snippet": "  \t# Check distance\n> \tvar distance = entity.global_position.distance_to(current_target.global_position)\n  \tif distance > lose_target_distance:\n"}, {"line": 112, "type": "Typing", "severity": "medium", "message": "Missing static type hint on variable. Adding types improves performance.", "snippet": "  \t\n> \tvar space_state = entity.get_world_2d().direct_space_state\n  \tvar query = PhysicsRayQueryParameters2D.create(\n"}, {"line": 113, "type": "Typing", "severity": "medium", "message": "Missing static type hint on variable. Adding types improves performance.", "snippet": "  \tvar space_state = entity.get_world_2d().direct_space_state\n> \tvar query = PhysicsRayQueryParameters2D.create(\n  \t\tentity.global_position,\n"}, {"line": 119, "type": "Typing", "severity": "medium", "message": "Missing static type hint on variable. Adding types improves performance.", "snippet": "  \t\n> \tvar result = space_state.intersect_ray(query)\n  \t\n"}], "lines": 140}, {"path": "scripts\\components\\ai\\patrol_ai.gd", "score": 94.0, "issues": [{"line": 44, "type": "Typing", "severity": "medium", "message": "Missing static type hint on variable. Adding types improves performance.", "snippet": "  \t\n> \tvar target = patrol_points[current_point_index]\n  \tvar distance = entity.global_position.distance_to(target)\n"}, {"line": 45, "type": "Typing", "severity": "medium", "message": "Missing static type hint on variable. Adding types improves performance.", "snippet": "  \tvar target = patrol_points[current_point_index]\n> \tvar distance = entity.global_position.distance_to(target)\n  \t\n"}, {"line": 53, "type": "Typing", "severity": "medium", "message": "Missing static type hint on variable. Adding types improves performance.", "snippet": "  \t# Move toward waypoint\n> \tvar direction = (target - entity.global_position).normalized()\n  \tpatrol_direction_changed.emit(direction)\n"}], "lines": 117}, {"path": "scripts\\components\\ai\\turret_ai.gd", "score": 82.0, "issues": [{"line": 99, "type": "Typing", "severity": "medium", "message": "Missing static type hint on variable. Adding types improves performance.", "snippet": "  \t\n> \tvar target_angle = entity.global_position.angle_to_point(current_target.global_position)\n  \tvar current_angle = entity.rotation\n"}, {"line": 100, "type": "Typing", "severity": "medium", "message": "Missing static type hint on variable. Adding types improves performance.", "snippet": "  \tvar target_angle = entity.global_position.angle_to_point(current_target.global_position)\n> \tvar current_angle = entity.rotation\n  \t\n"}, {"line": 103, "type": "Typing", "severity": "medium", "message": "Missing static type hint on variable. Adding types improves performance.", "snippet": "  \t# Rotate toward target\n> \tvar angle_diff = wrapf(target_angle - current_angle, -PI, PI)\n  \tvar rotation_step = deg_to_rad(rotation_speed) * delta\n"}, {"line": 104, "type": "Typing", "severity": "medium", "message": "Missing static type hint on variable. Adding types improves performance.", "snippet": "  \tvar angle_diff = wrapf(target_angle - current_angle, -PI, PI)\n> \tvar rotation_step = deg_to_rad(rotation_speed) * delta\n  \t\n"}, {"line": 126, "type": "Typing", "severity": "medium", "message": "Missing static type hint on variable. Adding types improves performance.", "snippet": "  \t# Spawn projectile\n> \tvar projectile = projectile_scene.instantiate()\n  \tentity.get_parent().add_child(projectile)\n"}, {"line": 136, "type": "Typing", "severity": "medium", "message": "Missing static type hint on variable. Adding types improves performance.", "snippet": "  \t# Set projectile direction\n> \tvar direction = Vector2.RIGHT.rotated(entity.rotation)\n  \tif projectile.has_method(\"set_direction\"):\n"}, {"line": 158, "type": "Typing", "severity": "medium", "message": "Missing static type hint on variable. Adding types improves performance.", "snippet": "  \t\n> \tvar space_state = entity.get_world_2d().direct_space_state\n  \tvar query = PhysicsRayQueryParameters2D.create(\n"}, {"line": 159, "type": "Typing", "severity": "medium", "message": "Missing static type hint on variable. Adding types improves performance.", "snippet": "  \tvar space_state = entity.get_world_2d().direct_space_state\n> \tvar query = PhysicsRayQueryParameters2D.create(\n  \t\tentity.global_position,\n"}, {"line": 165, "type": "Typing", "severity": "medium", "message": "Missing static type hint on variable. Adding types improves performance.", "snippet": "  \t\n> \tvar result = space_state.intersect_ray(query)\n  \treturn result.is_empty() or result.collider == target\n"}], "lines": 177}]};

        // --- Render Dashboard ---
        document.getElementById('gen-date').textContent = data.generated_at;
        document.getElementById('total-files').textContent = data.total_files;
        document.getElementById('total-lines').textContent = data.total_lines;
        document.getElementById('total-issues').textContent = data.total_issues;
        
        const scoreEl = document.getElementById('overall-score');
        scoreEl.textContent = data.overall_score;
        scoreEl.className = `score ${data.overall_score >= 80 ? 'good' : (data.overall_score >= 50 ? 'medium' : 'bad')}`;

        // Chart with click handler
        const ctx = document.getElementById('issueChart').getContext('2d');
        const chart = new Chart(ctx, {
            type: 'doughnut',
            data: {
                labels: ['High Priority', 'Medium Priority', 'Low Priority'],
                datasets: [{
                    data: [data.issues_breakdown.high, data.issues_breakdown.medium, data.issues_breakdown.low],
                    backgroundColor: ['#ff5252', '#ffb142', '#47a6ff'],
                    borderWidth: 0
                }]
            },
            options: { 
                responsive: true, 
                plugins: { 
                    legend: { position: 'bottom', labels: { color: '#bbb' } },
                    tooltip: {
                        callbacks: {
                            label: function(context) {
                                return context.label + ': ' + context.parsed + ' issues';
                            }
                        }
                    }
                },
                onClick: (event, elements) => {
                    if (elements.length > 0) {
                        const index = elements[0].index;
                        const severity = ['high', 'medium', 'low'][index];
                        filterBySeverity(severity);
                    }
                }
            }
        });

        // --- Render Files ---
        const listEl = document.getElementById('file-list');
        
        // Sort files by score (descending issues / ascending score)
        data.files.sort((a, b) => a.score - b.score);

        data.files.forEach(file => {
            if (file.issues.length === 0 && file.score === 100) return; // Skip perfect files

            const item = document.createElement('div');
            item.className = 'file-item';
            item.dataset.file = file.path;
            
            // Store severity info for filtering
            const severities = new Set(file.issues.map(i => i.severity));
            item.dataset.severities = Array.from(severities).join(',');
            
            const header = document.createElement('div');
            header.className = 'file-header';
            header.innerHTML = `
                <span class="file-name">${file.path}</span>
                <span class="file-score" style="color: ${file.score >= 80 ? '#2cc990' : (file.score >= 50 ? '#ffb142' : '#ff5252')}">
                    Score: ${file.score}
                </span>
            `;
            header.onclick = () => details.classList.toggle('open');
            
            const details = document.createElement('div');
            details.className = 'file-details';
            
            file.issues.forEach(issue => {
                const div = document.createElement('div');
                div.className = `issue ${issue.severity}`;
                div.dataset.severity = issue.severity;
                div.dataset.type = issue.type;
                div.innerHTML = `
                    <div>
                        <span class="issue-line">Line ${issue.line}</span>
                        <span class="issue-type">[${issue.type}]</span>
                        ${issue.message}
                    </div>
                    <div class="code-snippet">${issue.snippet}</div>
                `;
                details.appendChild(div);
            });
            
            item.appendChild(header);
            item.appendChild(details);
            listEl.appendChild(item);
        });
        
        // --- Filter Functionality ---
        let currentFilter = 'all';
        let enabledTypes = new Set(['Performance', 'Typing', 'Cleanup', 'Complexity']);
        
        function filterBySeverity(severity) {
            currentFilter = severity;
            
            // Update button states
            document.querySelectorAll('.filter-btn').forEach(btn => btn.classList.remove('active'));
            document.getElementById(`filter-${severity}`).classList.add('active');
            
            applyFilters();
        }
        
        function filterByType() {
            // Update enabled types based on checkboxes
            enabledTypes.clear();
            if (document.getElementById('type-performance').checked) enabledTypes.add('Performance');
            if (document.getElementById('type-typing').checked) enabledTypes.add('Typing');
            if (document.getElementById('type-cleanup').checked) enabledTypes.add('Cleanup');
            if (document.getElementById('type-complexity').checked) enabledTypes.add('Complexity');
            
            applyFilters();
        }
        
        function toggleAllTypes(show) {
            document.getElementById('type-performance').checked = show;
            document.getElementById('type-typing').checked = show;
            document.getElementById('type-cleanup').checked = show;
            document.getElementById('type-complexity').checked = show;
            filterByType();
        }
        
        function applyFilters() {
            const fileItems = document.querySelectorAll('.file-item');
            let visibleCount = 0;
            let visibleIssueCount = 0;
            
            fileItems.forEach(item => {
                const details = item.querySelector('.file-details');
                const issues = details.querySelectorAll('.issue');
                let hasVisibleIssue = false;
                
                issues.forEach(issue => {
                    const matchesSeverity = currentFilter === 'all' || issue.dataset.severity === currentFilter;
                    const matchesType = enabledTypes.has(issue.dataset.type);
                    
                    if (matchesSeverity && matchesType) {
                        issue.style.display = '';
                        hasVisibleIssue = true;
                        visibleIssueCount++;
                    } else {
                        issue.style.display = 'none';
                    }
                });
                
                // Hide file if no visible issues
                if (hasVisibleIssue) {
                    item.classList.remove('hidden');
                    visibleCount++;
                } else {
                    item.classList.add('hidden');
                }
            });
            
            // Update status
            const statusEl = document.getElementById('filter-status');
            if (currentFilter === 'all') {
                statusEl.textContent = `Showing ${visibleCount} files with ${visibleIssueCount} issues`;
            } else {
                const severityName = currentFilter.charAt(0).toUpperCase() + currentFilter.slice(1);
                statusEl.textContent = `Showing ${visibleCount} files with ${visibleIssueCount} ${severityName} priority issues`;
            }
            
            // Update type status
            const typeStatusEl = document.getElementById('type-status');
            const typeCount = enabledTypes.size;
            if (typeCount === 4) {
                typeStatusEl.textContent = 'All types shown';
            } else if (typeCount === 0) {
                typeStatusEl.textContent = 'No types selected';
            } else {
                typeStatusEl.textContent = `${typeCount} type(s) shown`;
            }
        }
        
        // Initialize with all issues shown
        filterBySeverity('all');
    </script>
</body>
</html>
