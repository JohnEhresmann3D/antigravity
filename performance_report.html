
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Godot Performance Analysis Report</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        :root {
            --bg-color: #1e1e1e;
            --text-color: #e0e0e0;
            --card-bg: #2d2d2d;
            --accent: #47a6ff;
            --danger: #ff5252;
            --warning: #ffb142;
            --success: #2cc990;
        }
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: var(--bg-color);
            color: var(--text-color);
            margin: 0;
            padding: 20px;
        }
        .container { max-width: 1200px; margin: 0 auto; }
        h1, h2, h3 { color: var(--accent); }
        .dashboard { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px; margin-bottom: 30px; }
        .card { background-color: var(--card-bg); padding: 20px; border-radius: 8px; box-shadow: 0 4px 6px rgba(0,0,0,0.3); }
        .score-card { text-align: center; }
        .score { font-size: 3em; font-weight: bold; }
        .score.good { color: var(--success); }
        .score.medium { color: var(--warning); }
        .score.bad { color: var(--danger); }
        
        .file-list { display: flex; flex-direction: column; gap: 10px; }
        .file-item { background-color: var(--card-bg); border-radius: 8px; overflow: hidden; }
        .file-header { 
            padding: 15px; 
            display: flex; 
            justify-content: space-between; 
            align-items: center; 
            cursor: pointer; 
            background-color: #333;
        }
        .file-header:hover { background-color: #3d3d3d; }
        .file-name { font-weight: bold; font-family: monospace; }
        .file-score { padding: 5px 10px; border-radius: 4px; font-weight: bold; background: #444; }
        
        .file-details { padding: 15px; display: none; border-top: 1px solid #444; }
        .file-details.open { display: block; }
        
        .issue { margin-bottom: 10px; padding: 8px; border-left: 3px solid; background: rgba(0,0,0,0.2); }
        .issue.high { border-color: var(--danger); }
        .issue.medium { border-color: var(--warning); }
        .issue.low { border-color: var(--accent); }
        .issue-line { font-family: monospace; color: #aaa; margin-right: 10px; }
        .issue-type { font-weight: bold; margin-right: 10px; }
        .code-snippet { 
            font-family: monospace; 
            background: #111; 
            padding: 10px; 
            margin-top: 5px; 
            color: #ccc; 
            overflow-x: auto;
            white-space: pre;
        }
        .highlight { color: #fff; font-weight: bold; background: rgba(255, 82, 82, 0.2); }
    </style>
</head>
<body>
    <div class="container">
        <h1>Godot Performance Analysis</h1>
        <p>Generated on: <span id="gen-date"></span></p>

        <div class="dashboard">
            <div class="card score-card">
                <h3>Overall Health</h3>
                <div id="overall-score" class="score">-</div>
                <p>Based on static analysis rules</p>
            </div>
            <div class="card">
                <h3>Issue Distribution</h3>
                <canvas id="issueChart"></canvas>
            </div>
            <div class="card">
                <h3>Stats</h3>
                <p>Files Scanned: <span id="total-files">0</span></p>
                <p>Total Lines: <span id="total-lines">0</span></p>
                <p>Total Issues: <span id="total-issues">0</span></p>
            </div>
        </div>

        <h2>Detailed File Analysis</h2>
        <div id="file-list" class="file-list"></div>
    </div>

    <script>
        const data = {"generated_at": "2026-01-07 22:46:00", "overall_score": 77, "total_files": 26, "total_lines": 3118, "total_issues": 117, "issues_breakdown": {"high": 0, "medium": 99, "low": 18}, "files": [{"path": "tests\\unit\\test_damage_component.gd", "score": 70, "issues": [{"line": 46, "type": "Typing", "severity": "medium", "message": "Missing static type hint. Adding types improves performance.", "snippet": "  func test_deal_damage_reduces_target_health():\n> \tvar initial_health = mock_health.current_health\n  \tdamage_component._deal_damage_to_node(mock_target)\n"}, {"line": 62, "type": "Typing", "severity": "medium", "message": "Missing static type hint. Adding types improves performance.", "snippet": "  \tmock_target.add_to_group(\"enemy\") # Now in both player and enemy groups\n> \tvar initial_health = mock_health.current_health\n  \tdamage_component._deal_damage_to_node(mock_target)\n"}, {"line": 86, "type": "Typing", "severity": "medium", "message": "Missing static type hint. Adding types improves performance.", "snippet": "  \tdamage_component._deal_damage_to_node(mock_target)\n> \tvar health_after_first = mock_health.current_health\n  \t# Note: _deal_damage_to_node doesn't check one_shot flag internally\n"}, {"line": 98, "type": "Typing", "severity": "medium", "message": "Missing static type hint. Adding types improves performance.", "snippet": "  \tdamage_component.reset()\n> \tvar health_before_reset = mock_health.current_health\n  \tdamage_component._deal_damage_to_node(mock_target)\n"}, {"line": 122, "type": "Typing", "severity": "medium", "message": "Missing static type hint. Adding types improves performance.", "snippet": "  \tdamage_component.damage = -10\n> \tvar initial_health = mock_health.current_health\n  \tdamage_component._deal_damage_to_node(mock_target)\n"}, {"line": 127, "type": "Typing", "severity": "medium", "message": "Missing static type hint. Adding types improves performance.", "snippet": "  func test_damage_to_node_without_health_component():\n> \tvar target_no_health = Node2D.new()\n  \ttarget_no_health.add_to_group(\"player\")\n"}], "lines": 140}, {"path": "tests\\unit\\test_gravity_manager.gd", "score": 10, "issues": [{"line": 20, "type": "Typing", "severity": "medium", "message": "Missing static type hint. Adding types improves performance.", "snippet": "  func test_default_gravity_is_downward():\n> \tvar gravity_vector = gravity_manager.get_gravity_vector()\n  \tassert_eq(gravity_vector.normalized(), Vector2.DOWN, \"Default gravity should be downward\")\n"}, {"line": 24, "type": "Typing", "severity": "medium", "message": "Missing static type hint. Adding types improves performance.", "snippet": "  func test_default_gravity_strength_is_one():\n> \tvar strength = gravity_manager.get_gravity_strength()\n  \tassert_eq(strength, 1.0, \"Default gravity strength should be 1.0\")\n"}, {"line": 33, "type": "Typing", "severity": "medium", "message": "Missing static type hint. Adding types improves performance.", "snippet": "  \tgravity_manager.set_gravity_direction(Vector2.UP)\n> \tvar gravity_vector = gravity_manager.get_gravity_vector()\n  \tassert_eq(gravity_vector.normalized(), Vector2.UP, \"Gravity direction should change to UP\")\n"}, {"line": 40, "type": "Typing", "severity": "medium", "message": "Missing static type hint. Adding types improves performance.", "snippet": "  \tgravity_manager.set_cardinal_direction(\"up\")\n> \tvar gravity_vector = gravity_manager.get_gravity_vector()\n  \tassert_eq(gravity_vector.normalized(), Vector2.UP, \"Cardinal 'up' should set gravity upward\")\n"}, {"line": 46, "type": "Typing", "severity": "medium", "message": "Missing static type hint. Adding types improves performance.", "snippet": "  \tgravity_manager.set_cardinal_direction(\"down\")\n> \tvar gravity_vector = gravity_manager.get_gravity_vector()\n  \tassert_eq(gravity_vector.normalized(), Vector2.DOWN, \"Cardinal 'down' should set gravity downward\")\n"}, {"line": 51, "type": "Typing", "severity": "medium", "message": "Missing static type hint. Adding types improves performance.", "snippet": "  \tgravity_manager.set_cardinal_direction(\"left\")\n> \tvar gravity_vector = gravity_manager.get_gravity_vector()\n  \tassert_eq(gravity_vector.normalized(), Vector2.LEFT, \"Cardinal 'left' should set gravity leftward\")\n"}, {"line": 57, "type": "Typing", "severity": "medium", "message": "Missing static type hint. Adding types improves performance.", "snippet": "  \tgravity_manager.set_cardinal_direction(\"right\")\n> \tvar gravity_vector = gravity_manager.get_gravity_vector()\n  \tassert_eq(gravity_vector.normalized(), Vector2.RIGHT, \"Cardinal 'right' should set gravity rightward\")\n"}, {"line": 68, "type": "Typing", "severity": "medium", "message": "Missing static type hint. Adding types improves performance.", "snippet": "  \tgravity_manager.flip_gravity()\n> \tvar gravity_vector = gravity_manager.get_gravity_vector()\n  \tassert_eq(gravity_vector.normalized(), Vector2.UP, \"Flip should reverse gravity to UP\")\n"}, {"line": 73, "type": "Typing", "severity": "medium", "message": "Missing static type hint. Adding types improves performance.", "snippet": "  func test_flip_gravity_twice_returns_to_original():\n> \tvar original = gravity_manager.get_gravity_vector()\n  \tgravity_manager.flip_gravity()\n"}, {"line": 76, "type": "Typing", "severity": "medium", "message": "Missing static type hint. Adding types improves performance.", "snippet": "  \tgravity_manager.flip_gravity()\n> \tvar current = gravity_manager.get_gravity_vector()\n  \tassert_eq(current.normalized(), original.normalized(), \"Double flip should return to original direction\")\n"}, {"line": 85, "type": "Typing", "severity": "medium", "message": "Missing static type hint. Adding types improves performance.", "snippet": "  \tgravity_manager.set_gravity_strength(2.0)\n> \tvar strength = gravity_manager.get_gravity_strength()\n  \tassert_eq(strength, 2.0, \"Gravity strength should be 2.0\")\n"}, {"line": 92, "type": "Typing", "severity": "medium", "message": "Missing static type hint. Adding types improves performance.", "snippet": "  \tgravity_manager.set_gravity_strength(2.0)\n> \tvar gravity_vector = gravity_manager.get_gravity_vector()\n  \tassert_gt(gravity_vector.length(), 980.0, \"Gravity vector magnitude should increase with strength\")\n"}, {"line": 98, "type": "Typing", "severity": "medium", "message": "Missing static type hint. Adding types improves performance.", "snippet": "  \tgravity_manager.set_gravity_strength(0.0)\n> \tvar gravity_vector = gravity_manager.get_gravity_vector()\n  \tassert_eq(gravity_vector, Vector2.ZERO, \"Zero strength should result in zero gravity vector\")\n"}, {"line": 133, "type": "Typing", "severity": "medium", "message": "Missing static type hint. Adding types improves performance.", "snippet": "  \t\n> \tvar gravity_vector = gravity_manager.get_gravity_vector()\n  \tvar strength = gravity_manager.get_gravity_strength()\n"}, {"line": 134, "type": "Typing", "severity": "medium", "message": "Missing static type hint. Adding types improves performance.", "snippet": "  \tvar gravity_vector = gravity_manager.get_gravity_vector()\n> \tvar strength = gravity_manager.get_gravity_strength()\n  \t\n"}, {"line": 145, "type": "Typing", "severity": "medium", "message": "Missing static type hint. Adding types improves performance.", "snippet": "  \tgravity_manager.set_gravity_direction(Vector2.ZERO)\n> \tvar gravity_vector = gravity_manager.get_gravity_vector()\n  \t# Behavior with zero vector is implementation-dependent\n"}, {"line": 153, "type": "Typing", "severity": "medium", "message": "Missing static type hint. Adding types improves performance.", "snippet": "  \tgravity_manager.set_gravity_strength(-1.0)\n> \tvar strength = gravity_manager.get_gravity_strength()\n  \t# Behavior with negative strength is implementation-dependent\n"}, {"line": 160, "type": "Typing", "severity": "medium", "message": "Missing static type hint. Adding types improves performance.", "snippet": "  \tgravity_manager.set_gravity_strength(1000.0)\n> \tvar gravity_vector = gravity_manager.get_gravity_vector()\n  \tassert_true(gravity_vector.length() > 0, \"Should handle extremely high strength\")\n"}], "lines": 163}, {"path": "tests\\unit\\test_health_component.gd", "score": 95, "issues": [{"line": 27, "type": "Typing", "severity": "medium", "message": "Missing static type hint. Adding types improves performance.", "snippet": "  func test_health_initializes_at_zero_when_not_start_at_max():\n> \tvar comp = HealthComponent.new()\n  \tcomp.max_health = 100\n"}], "lines": 148}, {"path": "tests\\unit\\test_movement_component.gd", "score": 65, "issues": [{"line": 70, "type": "Typing", "severity": "medium", "message": "Missing static type hint. Adding types improves performance.", "snippet": "  func test_air_friction_is_weaker_than_ground_friction():\n> \tvar ground_vel = Vector2(100, 0)\n  \tvar air_vel = Vector2(100, 0)\n"}, {"line": 71, "type": "Typing", "severity": "medium", "message": "Missing static type hint. Adding types improves performance.", "snippet": "  \tvar ground_vel = Vector2(100, 0)\n> \tvar air_vel = Vector2(100, 0)\n  \t\n"}, {"line": 73, "type": "Typing", "severity": "medium", "message": "Missing static type hint. Adding types improves performance.", "snippet": "  \t\n> \tvar ground_comp = MovementComponent.new()\n  \tground_comp.friction = 800.0\n"}, {"line": 79, "type": "Typing", "severity": "medium", "message": "Missing static type hint. Adding types improves performance.", "snippet": "  \t\n> \tvar air_comp = MovementComponent.new()\n  \tair_comp.friction = 800.0\n"}, {"line": 95, "type": "Typing", "severity": "medium", "message": "Missing static type hint. Adding types improves performance.", "snippet": "  func test_apply_impulse_adds_to_velocity():\n> \tvar initial_velocity = movement_component.velocity\n  \tmovement_component.apply_impulse(Vector2(100, -200))\n"}, {"line": 126, "type": "Typing", "severity": "medium", "message": "Missing static type hint. Adding types improves performance.", "snippet": "  func test_update_with_zero_delta_does_nothing():\n> \tvar initial_velocity = movement_component.velocity\n  \tmovement_component.update(0.0)\n"}, {"line": 133, "type": "Typing", "severity": "medium", "message": "Missing static type hint. Adding types improves performance.", "snippet": "  \tmovement_component.update(0.05) # Small update\n> \tvar vel_after_small = movement_component.velocity.x\n  \tassert_gt(vel_after_small, 0, \"Velocity should increase after first update\")\n"}], "lines": 163}, {"path": "scripts\\autoload\\gravity_manager.gd", "score": 65, "issues": [{"line": 22, "type": "Cleanup", "severity": "low", "message": "Debug 'print()' call found. Use 'print_debug()' or remove.", "snippet": "  func _ready() -> void:\n> \tprint(\"GravityManager initialized\")\n  \tprint(\"Base gravity: \", BASE_GRAVITY)\n"}, {"line": 23, "type": "Cleanup", "severity": "low", "message": "Debug 'print()' call found. Use 'print_debug()' or remove.", "snippet": "  \tprint(\"GravityManager initialized\")\n> \tprint(\"Base gravity: \", BASE_GRAVITY)\n  \tprint(\"Initial direction: \", gravity_direction)\n"}, {"line": 24, "type": "Cleanup", "severity": "low", "message": "Debug 'print()' call found. Use 'print_debug()' or remove.", "snippet": "  \tprint(\"Base gravity: \", BASE_GRAVITY)\n> \tprint(\"Initial direction: \", gravity_direction)\n  \n"}, {"line": 37, "type": "Cleanup", "severity": "low", "message": "Debug 'print()' call found. Use 'print_debug()' or remove.", "snippet": "  \t\tgravity_changed.emit(gravity_direction)\n> \t\tprint(\"Gravity direction changed to: \", gravity_direction)\n  \n"}, {"line": 44, "type": "Cleanup", "severity": "low", "message": "Debug 'print()' call found. Use 'print_debug()' or remove.", "snippet": "  \tgravity_changed.emit(gravity_direction)\n> \tprint(\"Gravity flipped to: \", gravity_direction)\n  \n"}, {"line": 51, "type": "Cleanup", "severity": "low", "message": "Debug 'print()' call found. Use 'print_debug()' or remove.", "snippet": "  \tgravity_strength_changed.emit(gravity_strength)\n> \tprint(\"Gravity strength changed to: \", gravity_strength)\n  \n"}, {"line": 84, "type": "Cleanup", "severity": "low", "message": "Debug 'print()' call found. Use 'print_debug()' or remove.", "snippet": "  \tset_gravity_strength(1.0)\n> \tprint(\"Gravity reset to default\")\n  \n"}], "lines": 101}, {"path": "scripts\\collectibles\\gravity_core.gd", "score": 90, "issues": [{"line": 35, "type": "Typing", "severity": "medium", "message": "Missing static type hint. Adding types improves performance.", "snippet": "  \ttime_elapsed += delta\n> \tvar bob_offset = sin(time_elapsed * bob_speed) * bob_amplitude\n  \tglobal_position.y = initial_position.y + bob_offset\n"}, {"line": 70, "type": "Typing", "severity": "medium", "message": "Missing static type hint. Adding types improves performance.", "snippet": "  \t# Create tween for smooth animation\n> \tvar tween = create_tween()\n  \ttween.set_parallel(true)\n"}], "lines": 89}, {"path": "scripts\\components\\animation_controller_component.gd", "score": 100, "issues": [], "lines": 89}, {"path": "scripts\\components\\collectible_component.gd", "score": 100, "issues": [], "lines": 81}, {"path": "scripts\\components\\damage_component.gd", "score": 90, "issues": [{"line": 46, "type": "Typing", "severity": "medium", "message": "Missing static type hint. Adding types improves performance.", "snippet": "  \t# Check if the area's parent is in damage groups\n> \tvar parent = area.get_parent()\n  \tif parent:\n"}, {"line": 79, "type": "Typing", "severity": "medium", "message": "Missing static type hint. Adding types improves performance.", "snippet": "  \t\tif apply_knockback and target is CharacterBody2D:\n> \t\t\tvar direction = (target.global_position - global_position).normalized()\n  \t\t\t\n"}], "lines": 105}, {"path": "scripts\\components\\health_component.gd", "score": 85, "issues": [{"line": 42, "type": "Typing", "severity": "medium", "message": "Missing static type hint. Adding types improves performance.", "snippet": "  \t\n> \tvar actual_damage = min(amount, current_health)\n  \tcurrent_health -= actual_damage\n"}, {"line": 62, "type": "Typing", "severity": "medium", "message": "Missing static type hint. Adding types improves performance.", "snippet": "  \t\n> \tvar actual_heal = min(amount, max_health - current_health)\n  \t\n"}, {"line": 113, "type": "Typing", "severity": "medium", "message": "Missing static type hint. Adding types improves performance.", "snippet": "  \t\n> \tvar health_percent = get_health_percent()\n  \tmax_health = new_max\n"}], "lines": 117}, {"path": "scripts\\components\\movement_component.gd", "score": 95, "issues": [{"line": 48, "type": "Typing", "severity": "medium", "message": "Missing static type hint. Adding types improves performance.", "snippet": "  \t\"\"\"Apply friction to slow down velocity\"\"\"\n> \tvar friction_amount = friction if is_grounded else air_friction\n  \tvelocity = velocity.move_toward(Vector2.ZERO, friction_amount * delta)\n"}], "lines": 97}, {"path": "scripts\\enemies\\antigrav_orb.gd", "score": 70, "issues": [{"line": 61, "type": "Typing", "severity": "medium", "message": "Missing static type hint. Adding types improves performance.", "snippet": "  \tif state == \"idle\":\n> \t\tvar time = Time.get_ticks_msec() * 0.001\n  \t\t# Gentle vertical bobbing\n"}, {"line": 80, "type": "Typing", "severity": "medium", "message": "Missing static type hint. Adding types improves performance.", "snippet": "  \t\t2: # Circular\n> \t\t\tvar angle = Time.get_ticks_msec() * 0.001\n  \t\t\tvelocity.x = cos(angle) * float_speed\n"}, {"line": 95, "type": "Typing", "severity": "medium", "message": "Missing static type hint. Adding types improves performance.", "snippet": "  \t# Store original values\n> \tvar original_scale = animated_sprite.scale\n  \tvar original_rotation = rotation\n"}, {"line": 96, "type": "Typing", "severity": "medium", "message": "Missing static type hint. Adding types improves performance.", "snippet": "  \tvar original_scale = animated_sprite.scale\n> \tvar original_rotation = rotation\n  \t\n"}, {"line": 99, "type": "Typing", "severity": "medium", "message": "Missing static type hint. Adding types improves performance.", "snippet": "  \t# Phase 1: Charge up (0.3 seconds)\n> \tvar tween = create_tween()\n  \ttween.set_parallel(true)\n"}, {"line": 135, "type": "Typing", "severity": "medium", "message": "Missing static type hint. Adding types improves performance.", "snippet": "  \t# Knockback (loses control briefly)\n> \tvar knockback_dir = Vector2(randf_range(-1, 1), randf_range(-1, 1)).normalized()\n  \tvelocity = knockback_dir * 300.0\n"}], "lines": 163}, {"path": "scripts\\enemies\\flyer_drone.gd", "score": 90, "issues": [{"line": 70, "type": "Typing", "severity": "medium", "message": "Missing static type hint. Adding types improves performance.", "snippet": "  \t\n> \tvar direction = (player.global_position - global_position).normalized()\n  \tvelocity.x = direction.x * chase_speed\n"}, {"line": 85, "type": "Typing", "severity": "medium", "message": "Missing static type hint. Adding types improves performance.", "snippet": "  \t# Knockback\n> \tvar knockback_dir = - velocity.normalized() if velocity.length() > 0 else Vector2.LEFT\n  \tvelocity = knockback_dir * 200.0\n"}], "lines": 116}, {"path": "scripts\\enemies\\turret.gd", "score": 85, "issues": [{"line": 33, "type": "Typing", "severity": "medium", "message": "Missing static type hint. Adding types improves performance.", "snippet": "  \t\"\"\"Rotate turret to face player\"\"\"\n> \tvar angle = global_position.angle_to_point(player.global_position)\n  \trotation = angle\n"}, {"line": 50, "type": "Typing", "severity": "medium", "message": "Missing static type hint. Adding types improves performance.", "snippet": "  \t# Spawn projectile\n> \tvar projectile = projectile_scene.instantiate()\n  \tget_parent().add_child(projectile)\n"}, {"line": 55, "type": "Typing", "severity": "medium", "message": "Missing static type hint. Adding types improves performance.", "snippet": "  \t# Set projectile direction\n> \tvar direction = (player.global_position - barrel_marker.global_position).normalized()\n  \tif projectile.has_method(\"set_direction\"):\n"}], "lines": 105}, {"path": "scripts\\gravity\\gravity_zone.gd", "score": 90, "issues": [{"line": 30, "type": "Cleanup", "severity": "low", "message": "Debug 'print()' call found. Use 'print_debug()' or remove.", "snippet": "  \t\t_apply_zone_gravity()\n> \t\tprint(\"Player entered \", zone_type, \" gravity zone\")\n  \n"}, {"line": 40, "type": "Cleanup", "severity": "low", "message": "Debug 'print()' call found. Use 'print_debug()' or remove.", "snippet": "  \t\t\t_restore_original_gravity()\n> \t\t\tprint(\"Player exited gravity zone\")\n  \n"}], "lines": 69}, {"path": "scripts\\level\\checkpoint.gd", "score": 90, "issues": [{"line": 48, "type": "Typing", "severity": "medium", "message": "Missing static type hint. Adding types improves performance.", "snippet": "  \t# Update level manager if it exists\n> \tvar level = get_tree().get_first_node_in_group(\"level\")\n  \tif level and level.has_method(\"set_checkpoint\"):\n"}, {"line": 60, "type": "Typing", "severity": "medium", "message": "Missing static type hint. Adding types improves performance.", "snippet": "  \t# Create a simple pulse effect\n> \tvar tween = create_tween()\n  \ttween.set_loops(2)\n"}], "lines": 80}, {"path": "scripts\\level\\level_1_manager.gd", "score": 55, "issues": [{"line": 43, "type": "Typing", "severity": "medium", "message": "Missing static type hint. Adding types improves performance.", "snippet": "  \tif player and player.has_node(\"HealthComponent\"):\n> \t\tvar health = player.get_node(\"HealthComponent\")\n  \t\thealth.died.connect(_on_player_died)\n"}, {"line": 52, "type": "Typing", "severity": "medium", "message": "Missing static type hint. Adding types improves performance.", "snippet": "  \t\"\"\"Connect to all gravity core collectibles\"\"\"\n> \tvar cores = get_tree().get_nodes_in_group(\"gravity_cores\")\n  \tfor core in cores:\n"}, {"line": 64, "type": "Typing", "severity": "medium", "message": "Missing static type hint. Adding types improves performance.", "snippet": "  \t# Update HUD\n> \tvar hud = get_tree().get_first_node_in_group(\"hud\")\n  \tif hud and hud.has_method(\"add_core\"):\n"}, {"line": 70, "type": "Cleanup", "severity": "low", "message": "Debug 'print()' call found. Use 'print_debug()' or remove.", "snippet": "  \tif cores_collected >= total_gravity_cores:\n> \t\tprint(\"All gravity cores collected!\")\n  \n"}, {"line": 77, "type": "Cleanup", "severity": "low", "message": "Debug 'print()' call found. Use 'print_debug()' or remove.", "snippet": "  \tcheckpoint_reached.emit(checkpoint)\n> \tprint(\"Checkpoint reached: \", checkpoint.get_checkpoint_id())\n  \n"}, {"line": 85, "type": "Typing", "severity": "medium", "message": "Missing static type hint. Adding types improves performance.", "snippet": "  \t\n> \tvar spawn_position = Vector2.ZERO\n  \t\n"}, {"line": 97, "type": "Typing", "severity": "medium", "message": "Missing static type hint. Adding types improves performance.", "snippet": "  \tif player.has_node(\"HealthComponent\"):\n> \t\tvar health = player.get_node(\"HealthComponent\")\n  \t\thealth.revive()\n"}, {"line": 132, "type": "Typing", "severity": "medium", "message": "Missing static type hint. Adding types improves performance.", "snippet": "  \t\"\"\"Update HUD with current stats\"\"\"\n> \tvar hud = get_tree().get_first_node_in_group(\"hud\")\n  \tif hud:\n"}, {"line": 145, "type": "Typing", "severity": "medium", "message": "Missing static type hint. Adding types improves performance.", "snippet": "  \tif tutorial_prompts.has(room_id):\n> \t\tvar tutorial = get_tree().get_first_node_in_group(\"tutorial_prompt\")\n  \t\tif tutorial and tutorial.has_method(\"show_prompt\"):\n"}], "lines": 155}, {"path": "scripts\\level\\level_end_trigger.gd", "score": 55, "issues": [{"line": 39, "type": "Typing", "severity": "medium", "message": "Missing static type hint. Adding types improves performance.", "snippet": "  \t# Gather completion stats\n> \tvar stats = _gather_stats()\n  \t\n"}, {"line": 56, "type": "Typing", "severity": "medium", "message": "Missing static type hint. Adding types improves performance.", "snippet": "  \t\"\"\"Gather level completion statistics\"\"\"\n> \tvar stats = {\n  \t\t\"cores_collected\": 0,\n"}, {"line": 65, "type": "Typing", "severity": "medium", "message": "Missing static type hint. Adding types improves performance.", "snippet": "  \t# Get level manager stats if available\n> \tvar level = get_tree().get_first_node_in_group(\"level\")\n  \tif level:\n"}, {"line": 82, "type": "Typing", "severity": "medium", "message": "Missing static type hint. Adding types improves performance.", "snippet": "  \t# Create completion UI\n> \tvar message = \"GRAVITY CORE SYNCHRONIZED\\n\"\n  \tmessage += \"New Ability Unlocked: %s\\n\\n\" % unlock_ability.to_upper().replace(\"_\", \" \")\n"}, {"line": 87, "type": "Typing", "severity": "medium", "message": "Missing static type hint. Adding types improves performance.", "snippet": "  \tif stats.completion_time > 0:\n> \t\tvar minutes = int(stats.completion_time / 60)\n  \t\tvar seconds = int(stats.completion_time) % 60\n"}, {"line": 88, "type": "Typing", "severity": "medium", "message": "Missing static type hint. Adding types improves performance.", "snippet": "  \t\tvar minutes = int(stats.completion_time / 60)\n> \t\tvar seconds = int(stats.completion_time) % 60\n  \t\tmessage += \"Time: %02d:%02d\\n\" % [minutes, seconds]\n"}, {"line": 92, "type": "Typing", "severity": "medium", "message": "Missing static type hint. Adding types improves performance.", "snippet": "  \t# Show via tutorial prompt if available\n> \tvar tutorial = get_tree().get_first_node_in_group(\"tutorial_prompt\")\n  \tif tutorial and tutorial.has_method(\"show_prompt\"):\n"}, {"line": 96, "type": "Cleanup", "severity": "low", "message": "Debug 'print()' call found. Use 'print_debug()' or remove.", "snippet": "  \telse:\n> \t\tprint(message)\n  \n"}, {"line": 103, "type": "Cleanup", "severity": "low", "message": "Debug 'print()' call found. Use 'print_debug()' or remove.", "snippet": "  \t\t# Return to main menu or level select\n> \t\tprint(\"Level complete! No next level specified.\")\n  \t\t# Could load main menu here\n"}], "lines": 113}, {"path": "scripts\\level\\moving_platform.gd", "score": 85, "issues": [{"line": 44, "type": "Typing", "severity": "medium", "message": "Missing static type hint. Adding types improves performance.", "snippet": "  \t# Move towards current target\n> \tvar direction = (current_target - global_position).normalized()\n  \tvar distance_to_target = global_position.distance_to(current_target)\n"}, {"line": 45, "type": "Typing", "severity": "medium", "message": "Missing static type hint. Adding types improves performance.", "snippet": "  \tvar direction = (current_target - global_position).normalized()\n> \tvar distance_to_target = global_position.distance_to(current_target)\n  \t\n"}, {"line": 48, "type": "Typing", "severity": "medium", "message": "Missing static type hint. Adding types improves performance.", "snippet": "  \t# Calculate movement\n> \tvar move_amount = move_speed * delta\n  \t\n"}], "lines": 93}, {"path": "scripts\\player\\player.gd", "score": 45, "issues": [{"line": 125, "type": "Typing", "severity": "medium", "message": "Missing static type hint. Adding types improves performance.", "snippet": "  \t\t\n> \t\tvar gravity = GravityManager.get_gravity_vector()\n  \t\t\n"}, {"line": 134, "type": "Typing", "severity": "medium", "message": "Missing static type hint. Adding types improves performance.", "snippet": "  \t\t# Cap fall speed\n> \t\tvar speed_in_gravity_dir = velocity.dot(gravity.normalized())\n  \t\tif speed_in_gravity_dir > max_fall_speed:\n"}, {"line": 141, "type": "Typing", "severity": "medium", "message": "Missing static type hint. Adding types improves performance.", "snippet": "  \t# Determine target speed\n> \tvar target_speed = run_speed if run_pressed else move_speed\n  \tis_running = run_pressed and abs(move_input) > 0.1\n"}, {"line": 155, "type": "Typing", "severity": "medium", "message": "Missing static type hint. Adding types improves performance.", "snippet": "  \t# Check if we can jump (on ground or coyote time)\n> \tvar can_jump = coyote_timer > 0\n  \t\n"}, {"line": 158, "type": "Typing", "severity": "medium", "message": "Missing static type hint. Adding types improves performance.", "snippet": "  \t# Check if jump was buffered\n> \tvar wants_to_jump = jump_buffer_timer > 0\n  \t\n"}, {"line": 177, "type": "Typing", "severity": "medium", "message": "Missing static type hint. Adding types improves performance.", "snippet": "  \telse:\n> \t\tvar gravity_dir = GravityManager.gravity_direction\n  \t\tvelocity = - gravity_dir * abs(jump_velocity)\n"}, {"line": 180, "type": "Cleanup", "severity": "low", "message": "Debug 'print()' call found. Use 'print_debug()' or remove.", "snippet": "  \t\n> \tprint(\"Jump! Velocity: \", velocity)\n  \n"}, {"line": 201, "type": "Cleanup", "severity": "low", "message": "Debug 'print()' call found. Use 'print_debug()' or remove.", "snippet": "  \t\n> \tprint(\"Gravity flip activated!\")\n  \n"}, {"line": 242, "type": "Cleanup", "severity": "low", "message": "Debug 'print()' call found. Use 'print_debug()' or remove.", "snippet": "  func _on_gravity_changed(new_direction: Vector2) -> void:\n> \tprint(\"Player: Gravity changed to \", new_direction)\n  \t# Could add visual effects here\n"}, {"line": 248, "type": "Cleanup", "severity": "low", "message": "Debug 'print()' call found. Use 'print_debug()' or remove.", "snippet": "  func take_damage(amount: int) -> void:\n> \tprint(\"Player took \", amount, \" damage!\")\n  \tanimated_sprite.play(\"damage\")\n"}, {"line": 265, "type": "Cleanup", "severity": "low", "message": "Debug 'print()' call found. Use 'print_debug()' or remove.", "snippet": "  \thas_gravity_flip = true\n> \tprint(\"Gravity flip unlocked!\")\n  \t# TODO: Show UI notification\n"}], "lines": 268}, {"path": "scripts\\projectiles\\projectile.gd", "score": 100, "issues": [], "lines": 73}, {"path": "scripts\\ui\\game_hud.gd", "score": 85, "issues": [{"line": 32, "type": "Typing", "severity": "medium", "message": "Missing static type hint. Adding types improves performance.", "snippet": "  \t# Calculate hearts to show\n> \tvar hearts_to_show = ceili(float(maximum) / 20.0) # 1 heart per 20 HP\n  \tvar filled_hearts = ceili(float(current) / 20.0)\n"}, {"line": 33, "type": "Typing", "severity": "medium", "message": "Missing static type hint. Adding types improves performance.", "snippet": "  \tvar hearts_to_show = ceili(float(maximum) / 20.0) # 1 heart per 20 HP\n> \tvar filled_hearts = ceili(float(current) / 20.0)\n  \t\n"}, {"line": 37, "type": "Typing", "severity": "medium", "message": "Missing static type hint. Adding types improves performance.", "snippet": "  \tfor i in range(hearts_to_show):\n> \t\tvar heart = TextureRect.new()\n  \t\t\n"}], "lines": 82}, {"path": "scripts\\ui\\tutorial_prompt.gd", "score": 90, "issues": [{"line": 45, "type": "Typing", "severity": "medium", "message": "Missing static type hint. Adding types improves performance.", "snippet": "  \t\n> \tvar tween = create_tween()\n  \ttween.tween_property(self, \"modulate:a\", 1.0, fade_duration)\n"}, {"line": 64, "type": "Typing", "severity": "medium", "message": "Missing static type hint. Adding types improves performance.", "snippet": "  \t# Fade out\n> \tvar tween = create_tween()\n  \ttween.tween_property(self, \"modulate:a\", 0.0, fade_duration)\n"}], "lines": 74}, {"path": "scripts\\components\\ai\\chase_ai.gd", "score": 70, "issues": [{"line": 44, "type": "Typing", "severity": "medium", "message": "Missing static type hint. Adding types improves performance.", "snippet": "  \t\n> \tvar distance = entity.global_position.distance_to(current_target.global_position)\n  \t\n"}, {"line": 52, "type": "Typing", "severity": "medium", "message": "Missing static type hint. Adding types improves performance.", "snippet": "  \t# Chase target\n> \tvar direction = (current_target.global_position - entity.global_position).normalized()\n  \treturn direction * chase_speed\n"}, {"line": 97, "type": "Typing", "severity": "medium", "message": "Missing static type hint. Adding types improves performance.", "snippet": "  \t# Check distance\n> \tvar distance = entity.global_position.distance_to(current_target.global_position)\n  \tif distance > lose_target_distance:\n"}, {"line": 112, "type": "Typing", "severity": "medium", "message": "Missing static type hint. Adding types improves performance.", "snippet": "  \t\n> \tvar space_state = entity.get_world_2d().direct_space_state\n  \tvar query = PhysicsRayQueryParameters2D.create(\n"}, {"line": 113, "type": "Typing", "severity": "medium", "message": "Missing static type hint. Adding types improves performance.", "snippet": "  \tvar space_state = entity.get_world_2d().direct_space_state\n> \tvar query = PhysicsRayQueryParameters2D.create(\n  \t\tentity.global_position,\n"}, {"line": 119, "type": "Typing", "severity": "medium", "message": "Missing static type hint. Adding types improves performance.", "snippet": "  \t\n> \tvar result = space_state.intersect_ray(query)\n  \t\n"}], "lines": 140}, {"path": "scripts\\components\\ai\\patrol_ai.gd", "score": 85, "issues": [{"line": 44, "type": "Typing", "severity": "medium", "message": "Missing static type hint. Adding types improves performance.", "snippet": "  \t\n> \tvar target = patrol_points[current_point_index]\n  \tvar distance = entity.global_position.distance_to(target)\n"}, {"line": 45, "type": "Typing", "severity": "medium", "message": "Missing static type hint. Adding types improves performance.", "snippet": "  \tvar target = patrol_points[current_point_index]\n> \tvar distance = entity.global_position.distance_to(target)\n  \t\n"}, {"line": 53, "type": "Typing", "severity": "medium", "message": "Missing static type hint. Adding types improves performance.", "snippet": "  \t# Move toward waypoint\n> \tvar direction = (target - entity.global_position).normalized()\n  \tpatrol_direction_changed.emit(direction)\n"}], "lines": 117}, {"path": "scripts\\components\\ai\\turret_ai.gd", "score": 55, "issues": [{"line": 99, "type": "Typing", "severity": "medium", "message": "Missing static type hint. Adding types improves performance.", "snippet": "  \t\n> \tvar target_angle = entity.global_position.angle_to_point(current_target.global_position)\n  \tvar current_angle = entity.rotation\n"}, {"line": 100, "type": "Typing", "severity": "medium", "message": "Missing static type hint. Adding types improves performance.", "snippet": "  \tvar target_angle = entity.global_position.angle_to_point(current_target.global_position)\n> \tvar current_angle = entity.rotation\n  \t\n"}, {"line": 103, "type": "Typing", "severity": "medium", "message": "Missing static type hint. Adding types improves performance.", "snippet": "  \t# Rotate toward target\n> \tvar angle_diff = wrapf(target_angle - current_angle, -PI, PI)\n  \tvar rotation_step = deg_to_rad(rotation_speed) * delta\n"}, {"line": 104, "type": "Typing", "severity": "medium", "message": "Missing static type hint. Adding types improves performance.", "snippet": "  \tvar angle_diff = wrapf(target_angle - current_angle, -PI, PI)\n> \tvar rotation_step = deg_to_rad(rotation_speed) * delta\n  \t\n"}, {"line": 126, "type": "Typing", "severity": "medium", "message": "Missing static type hint. Adding types improves performance.", "snippet": "  \t# Spawn projectile\n> \tvar projectile = projectile_scene.instantiate()\n  \tentity.get_parent().add_child(projectile)\n"}, {"line": 136, "type": "Typing", "severity": "medium", "message": "Missing static type hint. Adding types improves performance.", "snippet": "  \t# Set projectile direction\n> \tvar direction = Vector2.RIGHT.rotated(entity.rotation)\n  \tif projectile.has_method(\"set_direction\"):\n"}, {"line": 158, "type": "Typing", "severity": "medium", "message": "Missing static type hint. Adding types improves performance.", "snippet": "  \t\n> \tvar space_state = entity.get_world_2d().direct_space_state\n  \tvar query = PhysicsRayQueryParameters2D.create(\n"}, {"line": 159, "type": "Typing", "severity": "medium", "message": "Missing static type hint. Adding types improves performance.", "snippet": "  \tvar space_state = entity.get_world_2d().direct_space_state\n> \tvar query = PhysicsRayQueryParameters2D.create(\n  \t\tentity.global_position,\n"}, {"line": 165, "type": "Typing", "severity": "medium", "message": "Missing static type hint. Adding types improves performance.", "snippet": "  \t\n> \tvar result = space_state.intersect_ray(query)\n  \treturn result.is_empty() or result.collider == target\n"}], "lines": 177}]};

        // --- Render Dashboard ---
        document.getElementById('gen-date').textContent = data.generated_at;
        document.getElementById('total-files').textContent = data.total_files;
        document.getElementById('total-lines').textContent = data.total_lines;
        document.getElementById('total-issues').textContent = data.total_issues;
        
        const scoreEl = document.getElementById('overall-score');
        scoreEl.textContent = data.overall_score;
        scoreEl.className = `score ${data.overall_score >= 80 ? 'good' : (data.overall_score >= 50 ? 'medium' : 'bad')}`;

        // Chart
        const ctx = document.getElementById('issueChart').getContext('2d');
        new Chart(ctx, {
            type: 'doughnut',
            data: {
                labels: ['High Priority', 'Medium Priority', 'Low Priority'],
                datasets: [{
                    data: [data.issues_breakdown.high, data.issues_breakdown.medium, data.issues_breakdown.low],
                    backgroundColor: ['#ff5252', '#ffb142', '#47a6ff'],
                    borderWidth: 0
                }]
            },
            options: { responsive: true, plugins: { legend: { position: 'bottom', labels: { color: '#bbb' } } } }
        });

        // --- Render Files ---
        const listEl = document.getElementById('file-list');
        
        // Sort files by score (descending issues / ascending score)
        data.files.sort((a, b) => a.score - b.score);

        data.files.forEach(file => {
            if (file.issues.length === 0 && file.score === 100) return; // Skip perfect files

            const item = document.createElement('div');
            item.className = 'file-item';
            
            const header = document.createElement('div');
            header.className = 'file-header';
            header.innerHTML = `
                <span class="file-name">${file.path}</span>
                <span class="file-score" style="color: ${file.score >= 80 ? '#2cc990' : (file.score >= 50 ? '#ffb142' : '#ff5252')}">
                    Score: ${file.score}
                </span>
            `;
            header.onclick = () => details.classList.toggle('open');
            
            const details = document.createElement('div');
            details.className = 'file-details';
            
            file.issues.forEach(issue => {
                const div = document.createElement('div');
                div.className = `issue ${issue.severity}`;
                div.innerHTML = `
                    <div>
                        <span class="issue-line">Line ${issue.line}</span>
                        <span class="issue-type">[${issue.type}]</span>
                        ${issue.message}
                    </div>
                    <div class="code-snippet">${issue.snippet}</div>
                `;
                details.appendChild(div);
            });
            
            item.appendChild(header);
            item.appendChild(details);
            listEl.appendChild(item);
        });
    </script>
</body>
</html>
